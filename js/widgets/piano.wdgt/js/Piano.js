/*! For license information please see Piano.js.LICENSE.txt */
!function(){var e,t={55479:function(e,t,n){"use strict";n(86152),n(94030),n(18149),n(90882),n(79421),n(35676),n(93493),n(9850),n(76156);var r=n(16760),o=n.n(r),a=(n(87649),n(92620),n(35516),n(85505),function(){function e(t,n,r,o){this.message=t,this.expected=n,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var r,a,i,u,s,c=arguments.length>1?arguments[1]:{},l={},d={Expression:$},f=$,p=function(e){return e},h=function(e){return o()(e,(function(e){return e[0]}))},m="^",w={type:"literal",value:"^",description:'"^"'},g=function(){return{cmd:"^"}},b="_",v={type:"literal",value:"_",description:'"_"'},D=function(){return{cmd:"_"}},C="\\",y={type:"literal",value:"\\",description:'"\\\\"'},A=/^[A-Za-z]/,E={type:"class",value:"[A-Za-z]",description:"[A-Za-z]"},x=function(e){return{cmd:"\\"+e.join("")}},F=/^[\\ {}|'."~=\^`&#]/,k={type:"class",value:"[\\\\ {}|'.\"~=^`&#]",description:"[\\\\ {}|'.\"~=^`&#]"},B=function(e){return{cmd:"\\"+e}},T="{",O={type:"literal",value:"{",description:'"{"'},_="}",S={type:"literal",value:"}",description:'"}"'},P=function(){return{grp:[]}},I=function(e){return{grp:e}},R=/^[A-Za-z0-9\xC0-\u10FFFF.*\/+\-!=><&()[\]|\xB0,;:'\uFFFD"]/,j={type:"class",value:"[A-Za-z0-9\\u00c0-\\u10FFFF.*/+\\-!=><&()\\[\\]|°,;:'�\"]",description:"[A-Za-z0-9\\u00c0-\\u10FFFF.*/+\\-!=><&()\\[\\]|°,;:'�\"]"},M=function(e){return e},L=/^[ \t\n\r]/,W={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},U=0,H=[{line:1,column:1,seenCR:!1}],N=0,z=[],V=0;if("startRule"in c){if(!(c.startRule in d))throw new Error("Can't start parsing from rule \""+c.startRule+'".');f=d[c.startRule]}function q(e){var n,r,o=H[e];if(o)return o;for(n=e-1;!H[n];)n--;for(o={line:(o=H[n]).line,column:o.column,seenCR:o.seenCR};n<e;)"\n"===(r=t.charAt(n))?(o.seenCR||o.line++,o.column=1,o.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(o.line++,o.column=1,o.seenCR=!0):(o.column++,o.seenCR=!1),n++;return H[e]=o,o}function J(e,t){var n=q(e),r=q(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Y(e){U<N||(U>N&&(N=U,z=[]),z.push(e))}function $(){var e,t,n,r;return e=U,(t=G())===l&&(t=null),t!==l?(n=function(){var e,t,n,r;if(U,e=[],t=U,(n=Z())!==l?((r=G())===l&&(r=null),r!==l?t=n=[n,r]:(U=t,t=l)):(U=t,t=l),t!==l)for(;t!==l;)e.push(t),t=U,(n=Z())!==l?((r=G())===l&&(r=null),r!==l?t=n=[n,r]:(U=t,t=l)):(U=t,t=l);else e=l;return e!==l&&(e=h(e)),e}(),n!==l?((r=G())===l&&(r=null),r!==l?e=t=p(n):(U=e,e=l)):(U=e,e=l)):(U=e,e=l),e}function Z(){var e,n;return(e=function(){var e,n,r,o;if(e=U,94===t.charCodeAt(U)?(n=m,U++):(n=l,0===V&&Y(w)),n!==l&&(n=g()),(e=n)===l&&(e=U,95===t.charCodeAt(U)?(n=b,U++):(n=l,0===V&&Y(v)),n!==l&&(n=D()),(e=n)===l)){if(e=U,92===t.charCodeAt(U)?(n=C,U++):(n=l,0===V&&Y(y)),n!==l){if(r=[],A.test(t.charAt(U))?(o=t.charAt(U),U++):(o=l,0===V&&Y(E)),o!==l)for(;o!==l;)r.push(o),A.test(t.charAt(U))?(o=t.charAt(U),U++):(o=l,0===V&&Y(E));else r=l;r!==l?e=n=x(r):(U=e,e=l)}else U=e,e=l;e===l&&(e=U,92===t.charCodeAt(U)?(n=C,U++):(n=l,0===V&&Y(y)),n!==l?(F.test(t.charAt(U))?(r=t.charAt(U),U++):(r=l,0===V&&Y(k)),r!==l?e=n=B(r):(U=e,e=l)):(U=e,e=l))}return e}())===l&&(e=function(){var e,n,r,o;return e=U,123===t.charCodeAt(U)?(n=T,U++):(n=l,0===V&&Y(O)),n!==l?((r=G())===l&&(r=null),r!==l?(125===t.charCodeAt(U)?(o=_,U++):(o=l,0===V&&Y(S)),o!==l?e=n=P():(U=e,e=l)):(U=e,e=l)):(U=e,e=l),e}())===l&&(e=function(){var e,n,r,o;return e=U,123===t.charCodeAt(U)?(n=T,U++):(n=l,0===V&&Y(O)),n!==l&&(r=$())!==l?(125===t.charCodeAt(U)?(o=_,U++):(o=l,0===V&&Y(S)),o!==l?e=n=I(r):(U=e,e=l)):(U=e,e=l),e}())===l&&(R.test(t.charAt(U))?(n=t.charAt(U),U++):(n=l,0===V&&Y(j)),n!==l&&(n=M(n)),e=n),e}function G(){var e,n;if(e=[],L.test(t.charAt(U))?(n=t.charAt(U),U++):(n=l,0===V&&Y(W)),n!==l)for(;n!==l;)e.push(n),L.test(t.charAt(U))?(n=t.charAt(U),U++):(n=l,0===V&&Y(W));else e=l;return e}if(window._=n(76635),(r=f())!==l&&U===t.length)return r;throw r!==l&&U<t.length&&Y({type:"end",description:"end of input"}),a=null,i=z,u=N<t.length?t.charAt(N):null,s=N<t.length?J(N,N+1):J(N,N),null!==i&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(i),new e(null!==a?a:function(e,t){var n,r=new Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n].description;return"Expected "+(e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(i,u),i,u,s)}}}());a.parse,n(32944),n(92817)},92620:function(e,t,n){"use strict";n.d(t,{equalFormulas:function(){return C},isBalanced:function(){return b},joinIonsToFormula:function(){return v},parseEquation:function(){return p},parseFormula:function(){return d},reduceReactantsAndProducts:function(){return g},totalCharge:function(){return D}});var r=n(86152),o=n.n(r),a=function(e){return!isNaN(1*e)},i=function(e){var t=e.charCodeAt(0);return t>=65&&t<=90||t>=97&&t<=122},u=function(e){return i(e)&&e===e.toUpperCase()},s=function(e){return i(e)&&e===e.toLowerCase()},c=function(e,t,n,r,a){var i;if(t)if(""===n&&(n=1),o()(t)&&"1"===n)for(var u=0;u<t.length;++u)i={atom:t[u].atom,qty:parseInt(t[u].qty)},u===t.length-1&&(0!==r&&(i.charge=r),""!==a&&(i.phase=a)),e.push(i);else i={atom:t,qty:parseInt(n)},0!==r&&(i.charge=r),""!==a&&(i.phase=a),e.push(i)},l=function(e){for(var t="",n=0,r=0;r<e.length;++r){var o=e.charAt(r);if(a(o))t+=o;else if("+"===o){if(n=1,r!==e.length-1)return 0}else{if("-"!==o)return 0;if(n=-1,r!==e.length-1)return 0}}return parseInt(t)*n},d=function e(t){var n=[],r="",o="",i=0,d="";if(-1!==t.indexOf("!")||-1!==t.indexOf("@")||-1!==t.indexOf("#")||-1!==t.indexOf("$"))return[];var f=t+"H";f=f.replace(/\(s\)/g,"!").replace(/\(aq\)/g,"@").replace(/\(g\)/g,"#").replace(/\(l\)/g,"$");for(var p=0;p<f.length;++p){var h=f.charAt(p);if(u(h))c(n,r,o,i,d),r=h,o="",d="",i=0;else if(s(h)){if(!r)return[];r+=h}else if(a(h)){if(!r)return[];o+=h}else if("("===h){for(var m=!1,w=p+1;w<f.length;++w)if(")"===f.charAt(w)){m=!0;break}if(!m)return[];if(!a(f.charAt(w+1)))return[];if(c(n,r,o,i,d),0===(r=e(f.substring(p+1,w))).length)return[];o="",d="",i=0,p=w}else if("{"===h){for(m=!1,w=p+1;w<f.length;++w)if("}"===f.charAt(w)){m=!0;break}if(!m)return[];var g=f.substring(p+1,w);i=l(g),p=w}else if("!"===h){if(""!==d)return[];d="s"}else if("@"===h){if(""!==d)return[];d="aq"}else if("#"===h){if(""!==d)return[];d="g"}else{if("$"!==h)return[];if(""!==d)return[];d="l"}}return n},f=function(e,t){for(var n="",r=0;r<e.length;++r){var o=e.charAt(r);if(!a(o)){n=""===n?1:parseInt(n);var i=d(e.substring(r));return 0!==i.length&&(t.push({formula:i,qty:n}),!0)}n+=o}return console.error("Chemistryparser parseTerm: This should never happen"),!1},p=function(e){var t=e.replace(/ /g,"").split("=");if(2!==t.length)return{reactants:[],products:[]};for(var n=t[0].replace(/\+\}/g,"*}").split("+"),r=t[1].replace(/\+\}/g,"*}").split("+"),o=[],a=[],i=0;i<n.length;++i){var u=n[i].replace(/\*\}/g,"+}");if(!f(u,o))return{reactants:[],products:[]}}for(i=0;i<r.length;++i)if(u=r[i].replace(/\*\}/g,"+}"),!f(u,a))return{reactants:[],products:[]};return{reactants:o,products:a}},h=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=e[n].formula,a=e[n].qty,i=0;i<r.length;++i){var u=r[i];if(o()(u.atom))for(var s=0;s<u.atom.length;++s)t.push({atom:u.atom[s].atom,qty:u.atom[s].qty*u.qty*a});else t.push({atom:u.atom,qty:u.qty*a})}return t},m=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],o=!1,a=0;a<t.length;++a){var i=t[a];if(r.atom===i.atom){i.qty=i.qty+r.qty,o=!0;break}}o||t.push(r)}return t},w=function(e,t){for(var n=0;n<e.length;++n)if(e[n].atom===t)return n;return-1},g=function(e){var t=h(e.reactants),n=h(e.products);return function(e,t){for(var n=0,r=0;r<e.length;++r){var o=w(t,e[r].atom);if(o===n)++n;else if(o>=n){var a=t.splice(o,1)[0];t.splice(n,0,a),++n}}}(t=m(t),n=m(n)),{reactants:t,products:n}},b=function(e){var t=p(e),n=g(t);if(0===n.reactants.length)return!1;if(n.reactants.length!==n.products.length)return!1;for(var r=0;r<n.reactants.length;++r){var o=n.reactants[r],a=n.products[r];if(a.atom!==o.atom||a.qty!==o.qty)return!1}return!0},v=function(e){e=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],o=!1,a=0;a<t.length;++a){var i=t[a];if(r.ion===i.ion.ion&&r.charge===i.ion.charge){i.qty++,o=!0;break}}o||t.push({ion:r,qty:1})}return t}(e);for(var t=[],n=0;n<e.length;++n){var r=e[n];1===r.ion.pattern.length?t.push({atom:r.ion.pattern[0].atom,qty:r.qty}):t.push({atom:r.ion.pattern,qty:r.qty})}return function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];if(o()(r.atom))if(1===r.qty)for(var a=0;a<r.atom.length;++a)t.push({atom:r.atom[a].atom,qty:r.atom[a].qty});else t.push(r);else t.push(r)}return t}(t)},D=function(e){for(var t=0,n=0;n<e.length;++n)t+=e[n].charge;return t},C=function e(t,n){if(t.length!==n.length)return!1;for(var r=0;r<t.length;++r){if(t[r].qty!==n[r].qty)return!1;if(o()(t[r].atom)){if(!o()(n[r].atom))return!1;if(!e(t[r].atom,n[r].atom))return!1}else if(t[r].atom!==n[r].atom)return!1}return!0}},36710:function(e,t){"use strict";t.Z=function(e){return"undefined"==typeof window||window.navigator&&window.navigator.userAgent&&(window.navigator.userAgent.indexOf("PhantomJS")>=0||window.navigator.userAgent.indexOf("ibookwidgets")>=0)?e:(new window.DOMParser).parseFromString("<html>"+e+"</html>","text/html").documentElement.textContent}},98:function(e,t,n){"use strict";!function(){try{return RegExp(/^\p{L}/,"u")}catch(e){return/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])/}}()},21506:function(e,t,n){var r=n(28524),o=n(35368);o.default&&(o=o.default);var a={ADD_ATTR:["target","autocorrect","marker"]},i=o();r.fn.extend({sanitizeHtml:function(e,t){return i.sanitize(e,t||a)},safeHtml:function(e,t){return null==e?this.html():this.html(this.sanitizeHtml(e,t))},safeAppend:function(e,t){return null==e?this.append(null):this.append(this.sanitizeHtml(e,t))},safeAttr:function(e,t){var n=this.get(0).tagName;return i.isValidAttribute(n,e,t)?this.attr(e,t):this},isSafeURLForNavigation:function(e){return i.isValidAttribute("a","href",e)}}),e.exports=r},44334:function(e,t,n){"use strict";n.d(t,{randomId:function(){return o}}),Math.imul||(Math.imul=function(e,t){var n=(4194303&e)*(t|=0);return 4290772992&e&&(n+=(4290772992&e)*t|0),0|n}),function(e){for(var t=1779033703^e.length,n=0;n<e.length;n++)t=(t=Math.imul(t^e.charCodeAt(n),3432918353))<<13|t>>>19}((new Date).toLocaleString()+Math.random());var r={};function o(e){for(;;){for(var t="",n=0;n<e;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-".charAt(Math.floor(54*Math.random()));if(!r.hasOwnProperty(t))return r[t]=!0,t}}},32944:function(e,t,n){"use strict";n.d(t,{matchesOneOfAnswers:function(){return m},prepareForCompare:function(){return f},replaceBadQuotes:function(){return a},trimAll:function(){return h}}),n(16760);var r=n(90882),o=n.n(r);function a(e){return(e||"").replace(/[\u2018\u2019]/g,"'")}n(98),n(3255);var i=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹÐ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],u=null;var s=/[!,-.:;?"'`()[\]{}\u2026\u2014]/g,c=/\s+/g,l=/ ([!,-.:;?"'`()[\]{}\u2026\u2014])/g,d=/([!,-.:;?"'`()[\]{}\u2026\u2014]) /g;function f(e,t){return e?(t=function(e){if("string"==typeof e||e instanceof String)switch(e){case"no":e={case:"1",accent:"0",white:"0",punct:"0"};break;case"yes_ignore_accents":e={case:"0",accent:"1",white:"0",punct:"0"};break;case"no_ignore_accents":e={case:"1",accent:"1",white:"0",punct:"0"};break;default:e={case:"0",accent:"0",white:"0",punct:"0"}}return e}(t),e.normalize&&(e=e.normalize("NFKC")),t&&("1"===t.case&&(e=e.toLowerCase()),"1"===t.accent&&(n=e,null==u&&(u=function(){for(var e={},t=0;t<i.length;t++)for(var n=i[t].letters,r=0;r<n.length;r++)e[n[r]]=i[t].base;return e}()),e=n.replace(/[\u0301\u0060]/gi,"").replace(/[^\u0000-\u007E]/g,(function(e){return u[e]||e}))),"1"===t.punct&&(e=e.replace(s,"")),"1"===t.white&&(e=function(e){return e.replace(c," ").replace(l,"$1").replace(d,"$1")}(e))),e):"";var n}function p(e){return e.replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F\x7F-\x9F\u200B]/g,"")}function h(e){for(var t=0;t<e.length;++t)e[t]=e[t].trim();return e}function m(e,t,n){e=a(e),t=a(t),e=f(e,n);var r=h((t=f(t,n)).split(/##/));r.length>1&&(r=o()(r));for(var i=0;i<r.length;++i)if(p(e.trim())===p(r[i].trim()))return!0;return!1}},88853:function(e,t,n){"use strict";n.d(t,{Iu:function(){return o}}),n(21506);var r=[];function o(e){return r&&r[e]&&""!==r[e]?r[e]:e}},44166:function(e,t,n){"use strict";n.d(t,{appSafeUnescape:function(){return a}}),n(29259),n(85505),n(55479),n(92620);var r=n(21506),o=n.n(r);function a(e){return o()(document.createElement("div")).safeHtml(e).text()}},13377:function(e,t,n){var r,o,a,i,u,s,c,l;n(99290),e.exports=(r=n(937),o=n(39458),a=n(95792),i=n(21506),u=n(25750),s=n(58436),c=n(45127),l=n(6296),void i((function(){return r.getConfig().then((function(e){var t="Vibes"===e.noteDataFile?"js/vibes_data.js":"js/piano_data.js";console.log("Loading: "+t);var n=c.loadJS(t);function r(e,t,n){var r=/(_?[abcdefgrABCDEFGHR#n\-x+(]+)(\d+\)?)/.exec(e);if(r)var o=r[1].replace("c#","i").replace("C#","I").replace("d#","j").replace("D#","J").replace("f#","k").replace("F#","K").replace("g#","l").replace("G#","L").replace("a#","m").replace("A#","M").replace("cn","n").replace("Cn","N").replace("dn","o").replace("Dn","O").replace("en","p").replace("En","P").replace("fn","q").replace("Fn","Q").replace("gn","s").replace("Gn","S").replace("an","t").replace("An","T").replace("bn","u").replace("Bn","U").replace("d-","v").replace("D-","V").replace("e-","w").replace("E-","W").replace("g-","y").replace("G-","Y").replace("a-","z").replace("A-","Z").replace("b-","$").replace("B-","@");else"x"==e?(o=["x"],r=["x","x","1"]):alert("ERROR: don't know how to interpret "+e);var a=r[2],i=!1;")"==a[a.length-1]&&(i=!0,a=a.substring(0,a.length-1));for(var u=!1,s=!1,c=[],l=0;l<o.length;++l){var d=o[l].replace("i","c#").replace("I","C#").replace("j","d#").replace("J","D#").replace("k","f#").replace("K","F#").replace("l","g#").replace("L","G#").replace("m","a#").replace("M","A#").replace("n","cn").replace("N","Cn").replace("o","dn").replace("O","Dn").replace("p","en").replace("P","En").replace("q","fn").replace("Q","Fn").replace("s","gn").replace("S","Gn").replace("t","an").replace("T","An").replace("u","bn").replace("U","Bn").replace("v","d-").replace("V","D-").replace("w","e-").replace("W","E-").replace("y","g-").replace("Y","G-").replace("z","a-").replace("Z","A-").replace("$","b-").replace("@","B-"),f="";"r"==d||"R"==d?c.push("r"):"x"==d||"X"==d?c.push("x"):"("==d?i=!0:"_"==d?u=!0:"+"==d?s=!0:"H"==d?(f="C/6",c.push(f)):d==d.toLowerCase()?(f=d.replace("-","B")+"/4",c.push(f)):(f=d.replace("-","B")+"/5",c.push(f)),-1!=d.indexOf("#")&&(n[f.replace("#","")]=!0),-1!=d.indexOf("n")&&(n[f.replace("n","")]=!1),-1!=d.indexOf("-")&&(n[f.replace("B","")]=!1)}if(1==c.length&&"x"==c[0]){var p=new window.Vex.Flow.GhostNote({duration:"1"});return p.dont_highlight=!0,{note:p,beamBoundary:!1,tie:!1,hold:!1}}for(1==c.length&&"r"==c[0]&&(c[0]="b/4",a+="r"),(e=new window.Vex.Flow.StaveNote({keys:c,duration:a,clef:t,auto_stem:!0})).notenames=[],l=0;l<c.length;++l){-1!=c[l].indexOf("#")&&e.addAccidental(l,new window.Vex.Flow.Accidental("#")),-1!=c[l].indexOf("n")&&e.addAccidental(l,new window.Vex.Flow.Accidental("n")),c[l].length>1&&"B"===c[l][1]&&e.addAccidental(l,new window.Vex.Flow.Accidental("b"));var h=c[l].toLowerCase();h in n&&n[h]&&(h=h.replace("/","#/")),h=(h=h.replace("n","")).replace("-",""),e.notenames.push(h)}return{note:e,beamBoundary:i,tie:u,hold:s}}function d(e,t){for(var n=[],o=[],a=-1,i=[],u=-1,s={},c=0;c<e.length;++c){var l=r(e[c],t,s);n.push(l.note),l.beamBoundary&&(-1==a?a=c:(o.push([a,c]),a=-1)),l.tie&&i.push([c-1,c]),l.hold&&(u=c)}return{notes:n,beamRanges:o,tieRanges:i,holdNote:u}}function f(e,t,n){var r=/(_?[abcdefgrABCDEFGHR#n\-x+(]+)(\d+)\)?/.exec(t)[2],o=new window.Vex.Flow.TextNote({text:n,duration:r,font:{family:"Helvetica",size:10,weight:"300"}});return o.setLine(11).setStave(e).setJustification(window.Vex.Flow.TextNote.Justification.LEFT),o}function p(e,t,n){for(var r=[],o=Math.min(n.length,t.length),a=0;a<o;++a)r.push(f(e,t[a],n[a]));return r}function h(e){return null!=e&&""!=e}l.useManualNotify();var m=h(e.music_score_position.Width)&&h(e.music_score_position.Height)&&h(e.music_score_position.X)&&h(e.music_score_position.Y)?{Width:parseInt(e.music_score_position.Width),Height:parseInt(e.music_score_position.Height),X:parseInt(e.music_score_position.X),Y:parseInt(e.music_score_position.Y)}:{Width:1004,Height:500,X:10,Y:10};function w(e){return e.replace("db","c#").replace("Db","C#").replace("eb","d#").replace("Eb","D#").replace("gb","f#").replace("Gb","F#").replace("ab","g#").replace("Ab","G#").replace("bb","a#").replace("Bb","A#")}function g(e,t){for(var n=0;n<e.note_heads.length;++n)e.setKeyStyle(n,{fillStyle:"rgb(101, 230, 0)"});if(e.draw(),t){for(n=0;n<t.note_heads.length;++n)t.setKeyStyle(n,{fillStyle:"black"});t.draw()}for(n=0;n<e.keys.length;++n){var r=e.notenames[n];r=w(r),i("*[data-scorename='"+r+"']").addClass("next-note-to-play")}}var b=[];function v(e){if(e.filename&&""!==e.filename){var t=i(document.createElement("div"));i("#background-music").append(t);var n=o.addElement(e.filename,t);n.isPaused=!0,b.push(n);var r=i(document.createElement("div"));r.addClass("invisible-button"),r.css("top",e.play_button_position.Y+"px").css("left",e.play_button_position.X+"px").css("width",e.play_button_position.Width+"px").css("height",e.play_button_position.Height+"px");var a=i(document.createElement("div"));a.addClass("spinner hidden");var u=(parseInt(e.play_button_position.Y)+parseInt(e.play_button_position.Height)-40)/2,s=(parseInt(e.play_button_position.X)+parseInt(e.play_button_position.Width)-40)/2;a.css("top",u+"px").css("left",s+"px"),n.onLoaded((function(){n.on("error",(function(e,t){console.error("Audio error",n.element.error.code)})),n.on("pause",(function(){n.isPaused=!0})),n.on("ended",(function(){n.isPaused=!0})),r.hammer().on("tap",(function(){var t;if(n.isPaused){t=n,n.isPaused=!1,a.removeClass("hidden"),n.play((function(){a.addClass("hidden")}));var r=parseInt(e.volume)/100;r<0&&(r=0),r>1&&(r=1),n.setVolume(r)}i.each(b,(function(e,n){n!=t&&(n.pause(),n.rewind(),n.isPaused=!0)}))}))})),i("#score-container").append(r),i("#score-container").append(a)}}if(a.makeWidget({"no-user-select":!0}),e.startWithOctave=Math.min(Math.max(parseInt(e.startWithOctave),2),3),i("*[data-octave='0']").each((function(t,n){i(n).attr("data-notename",i(n).attr("data-notename")+e.startWithOctave)})),i("*[data-octave='1']").each((function(t,n){i(n).attr("data-notename",i(n).attr("data-notename")+(e.startWithOctave+1))})),i("*[data-octave='2']").each((function(t,n){i(n).attr("data-notename",i(n).attr("data-notename")+(e.startWithOctave+2))})),i("#music-score").css("top",m.Y+"px"),i("#music-score").css("left",m.X+"px"),i("#music-score").css("width",m.Width+"px"),i("#music-score").css("height",m.Height+"px"),i("#container").css("background","black url("+u(e.background_picture)+") no-repeat top left"),"Cover entire area, keep aspect ratio"==e.background_resize_policy?i("#container").css("background-size","cover"):"Contain entire picture, keep aspect ratio"==e.background_resize_policy?i("#container").css("background-size","contain"):"Cover entire area with entire picture"==e.background_resize_policy&&i("#container").css("background-size","100% 100%"),void 0!==window.webkitAudioContext)(D=new window.webkitAudioContext).isFake=!1;else if(void 0!==window.AudioContext){var D;(D=new window.AudioContext).isFake=!1}else D={decodeAudioData:function(){x()},createBufferSource:function(){return{connect:function(){},start:function(){}}},resume:function(){},isFake:!0};var C=i("*[data-notename]").map((function(e,t){return i(t).attr("data-notename")})),y={},A=0,E=C.length;function x(){++A;var e=Math.floor(100*A/E);i("#pct").text(e),A==E&&(i("#progressbar").css("display","none"),i("#score-container").removeClass("fully-transparent").addClass("fadeIn"),i("#piano-container").removeClass("fully-transparent").addClass("fadeIn"),l.notifyLoaded())}var F,k={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(e){var t=e.length/4*3,n=new window.ArrayBuffer(t);return this.decode(e,n),n},decode:function(e,t){var n,r,o,a,i,u,s,c=this._keyStr.indexOf(e.charAt(e.length-1)),l=this._keyStr.indexOf(e.charAt(e.length-2)),d=e.length/4*3;64==c&&d--,64==l&&d--;var f=0,p=0;for(n=t?new window.Uint8Array(t):new window.Uint8Array(d),e=e.replace(/[^A-Za-z0-9+/=]/g,""),f=0;f<d;f+=3)r=this._keyStr.indexOf(e.charAt(p++))<<2|(i=this._keyStr.indexOf(e.charAt(p++)))>>4,o=(15&i)<<4|(u=this._keyStr.indexOf(e.charAt(p++)))>>2,a=(3&u)<<6|(s=this._keyStr.indexOf(e.charAt(p++))),n[f]=r,64!=u&&(n[f+1]=o),64!=s&&(n[f+2]=a);return n}};n.done((function(){i.each(C,(function(e){var t=C[e];window.noteData[t]?function(e,t){D.decodeAudioData(e,(function(e){e?(y[t]=e,x()):console.log("error decoding file data for note "+t)}))}(k.decodeArrayBuffer(window.noteData[t]),t):console.error("Error: cannot find note data for "+t)}))})).fail((function(){console.error("Could not load notes file: "+t)}));var B=0,T=!0;function O(e){T&&(D.resume(),T=!1);var t=e.attr("data-notename"),n=D.createBufferSource();if(n.buffer=y[t],n.connect(D.destination),n.start||(n.start=n.noteOn),n.start(0),e.hasClass("next-note-to-play"))if(e.removeClass("next-note-to-play"),i(".next-note-to-play").length>0);else{for(var r=F[B];;){B=(B+1)%F.length;var o=F[B];if(!o.dont_highlight&&"n"==o.noteType)break}g(o,r)}}var _={},S=!1;function P(e){i(this).addClass("active");var t=e.originalEvent.changedTouches;if(t){e.preventDefault();for(var n=0;n<t.length;++n)_[t[n].identifier]=i(this)}else _[0]=i(this),S=!0;O(i(this))}function I(e){var t=e.originalEvent.changedTouches;if(t)for(var n=0;n<t.length;++n){var r;(r=_[t[n].identifier])&&(r.removeClass("active"),delete _[t[n].identifier])}else(r=_[0])&&(r.removeClass("active"),delete _[0]),S=!1}function R(e){var t=e.originalEvent.changedTouches;if(t)for(var n=0;n<t.length;++n){var r=_[t[n].identifier];(o=i(document.elementFromPoint(t[n].clientX,t[n].clientY))).is(r)||(r&&r.removeClass("active"),o.is(".key")?(_[t[n].identifier]=o,o.addClass("active"),O(o)):delete _[t[n].identifier])}else{if(!S)return;var o;r=_[0],(o=i(document.elementFromPoint(e.originalEvent.clientX,e.originalEvent.clientY))).is(r)||(r&&r.removeClass("active"),o.is(".key")?(_[0]=o,o.addClass("active"),O(o)):delete _[0])}}var j=i(".key");if(j.mousedown(P),i("body").mouseup(I),i("body").on("mousemove",R),j.on("touchstart",P),i("body").on("touchend",I),i("body").on("touchmove",R),function(){for(var t=e.background_music||[],n=0;n<t.length;++n)v(e.background_music[n])}(),F=function(){var t=i("#music-score"),n=t[0],r=window.Vex.Flow.Renderer.Backends.RAPHAEL;"ibw-platform-win32-preview"===s.getPlatform()&&(n=i(document.createElement("canvas")).attr({width:m.Width,height:m.Height}).appendTo(t)[0],r=window.Vex.Flow.Renderer.Backends.CANVAS);for(var o,a,u,c=new window.Vex.Flow.Renderer(n,r).getContext(),l=m.Width-20,f=m.Height,h=40+(e.copyright?30:0),w=0+(e.title?40:0),g=[],b=w,v=e.score||[],D=0;D<v.length;++D){for(var C=v[D],y=C.measures||[],A=0,E=0;E<y.length;++E)y[E].notes=y[E].notes.replace(/[ ]{2,}/g," ").replace(/\([ ]+/g,"(").replace(/[ ]+\)/g,")").split(" "),y[E].text=y[E].text.split(","),A+=y[E].notes.length+1;var x=10;for(E=0;E<y.length;++E){var F=y[E],k=1*l*(F.notes.length+1)/A,B=new window.Vex.Flow.Stave(x,b,k);0==E&&(C.clef&&B.addClef(C.clef.toLowerCase()),C.timeSignature&&B.addTimeSignature(C.timeSignature)),B.setContext(c).draw(),B.setEndBarType(window.Vex.Flow.Barline.type.END);for(var T=d(F.notes,C.clef.toLowerCase()),O=[],_=[],S=0;S<T.beamRanges.length;++S){var P=T.beamRanges[S],I=new window.Vex.Flow.Beam(T.notes.slice(P[0],P[1]+1));O.push(I)}for(var R=0;R<T.tieRanges.length;++R){var j,M;(P=T.tieRanges[R])[0]>=0?(j=T.notes[P[0]],M=[0]):g.length>0?0==E?(j=void 0,M=void 0):(j=g[g.length-1],M=[0]):alert("Error: first note of first measure of first stave cannot begin with an underscore!");var L=T.notes[P[1]],W=new window.Vex.Flow.StaveTie({first_note:j,last_note:L,first_indices:M,last_indices:[0]});_.push(W),j&&L?(o=L,a=void 0,u=void 0,a=j.getKeyProps()[0],u=o.getKeyProps()[0],a.key.replace("#","")===u.key.replace("#","")&&a.octave===u.octave&&(L.dont_highlight=!0)):L&&(T.notes[0].x_shift=10,L.dont_highlight=!0)}if(-1!=T.holdNote){var U=new window.Vex.Flow.StaveTie({first_note:T.notes[T.notes.length-1],first_indices:[0]});_.push(U)}var H=p(B,F.notes,F.text),N=new window.Vex.Flow.Voice(window.Vex.Flow.TIME4_4).setMode(window.Vex.Flow.Voice.Mode.SOFT);N.addTickables(T.notes);var z=new window.Vex.Flow.Voice(window.Vex.Flow.TIME4_4).setMode(window.Vex.Flow.Voice.Mode.SOFT);for(z.addTickables(H),(new window.Vex.Flow.Formatter).joinVoices([N,z]).formatToStave([N,z],B),N.draw(c,B),z.draw(c,B),S=0;S<O.length;++S)O[S].setContext(c).draw();for(R=0;R<_.length;++R)_[R].setContext(c).draw();g=g.concat(T.notes),x+=B.width}b+=(f-h-w)/v.length}if(e.title){var V=i(document.createElement("h1"));V.addClass("title"),V.text(e.title),i(t).append(V)}if(e.copyright){var q=i(document.createElement("h2"));q.text(e.copyright),i(t).append(q)}return g}(),B=-1,F.length>0){for(;;){B=(B+1)%F.length;var M=F[B];if(!M.dont_highlight&&"n"==M.noteType)break}g(F[B])}function L(){var e=i("#container").width(),t=.4*i("#container").height(),n=Math.min((e-30)/15,66)/66,r=Math.max(t/240,1),o=Math.max(Math.min(n,r)),a=240*o,u=66*o,s=220*o,c=216*o,l=64*o,d=120*o,f=33*o;i("ul#piano").css({height:a}),i("ul#piano li").css({width:u}),i("ul#piano li div.white.key").css({width:l,height:s}),i("ul#piano li div.white.key.active").css({height:c}),i("ul#piano li span.black.key").css({width:f,height:d});var p=i("#score-container"),h=p.width()/1024,m=p.height()/520,w=Math.min(h,m);i("#score-wrapper").css({"-ms-transform":"scale("+w+","+w+")","-webkit-transform":"scale("+w+","+w+")",transform:"scale("+w+","+w+")",height:520*w,position:"relative",left:0,top:0})}window.widget||(window.widget=[]),window.onunload=window.widget.pauseAudioVisual=function(){i.each(b,(function(e,t){t.pause(),t.rewind(),t.isPaused=!0}))},window.onresize=L,L()})),null})))},39458:function(e,t,n){"use strict";n.r(t),n.d(t,{addElement:function(){return D},createElement:function(){return w},createPlayer:function(){return b},createPlayerLimited:function(){return g},pauseAll:function(){return h},process:function(){return m},processAudioTags:function(){return v}});var r=n(21506),o=n.n(r),a=n(97462),i=n.n(a),u=n(35226),s=n.n(u),c="<polygon points='10,10 40,25 10,40'/>",l="<rect x='13' y='13' width='24' height='24'/>",d="<rect x='10' y='10' width='11' height='30'/><rect x='29' y='10' width='11' height='30'/>",f=function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" version="1.1">'+e+"</svg>"};function p(e,t,n,r,a,u){var p=1,h=!1,m=!1,w=Number(r);function g(){return s()("plays left: %d").replace("%d",p>w?"0":w-p+1)}(!w||w<0||Number.isNaN(w))&&(w=0);var b=o()(document.createElement("div")).addClass("bw-audio-player").attr({state:"stopped","data-plays":"enabled",role:"group","aria-label":s()("Audio player")});n?o()(e).replaceWith(b):b.appendTo(e);var v,D=o()(document.createElement("div")).appendTo(b),C=o()(document.createElement("div")).addClass("bw-audio-player-button bw-audio-play").append(f(c)).makeButton(s()("play")).appendTo(D),y=o()(document.createElement("div")).addClass("bw-audio-player-button bw-audio-pause").append(f(d)).makeButton(s()("pause")).appendTo(D),A=o()(document.createElement("div")).addClass("bw-audio-player-button bw-audio-stop").append(f(l)).makeButton(s()("stop")).appendTo(D),E=o()(document.createElement("div")).addClass("bw-audio-player-time bw-audio-player-playtime").safeHtml("__:__").appendTo(D);o()(document.createElement("span")).text(" / ").addClass("bw-audio-player-time  bw-audio-player-slash").appendTo(D);var x=o()(document.createElement("div")).addClass("bw-audio-player-time bw-audio-player-totaltime").safeHtml("__:__").appendTo(D),F=o()(document.createElement("div")).addClass("bw-audio-progress-container").appendTo(b),k=o()(document.createElement("input")).attr("type","range").addClass("bw-audio-progress").attr("min","0").attr("max","0").val(0).appendTo(F);if(w){var B=o()(document.createElement("div")).addClass("bw-audio-player-playcount").appendTo(b);v=o()(document.createElement("span")).addClass("bw-audio-player-plays").safeHtml(g()).appendTo(B),b.attr("data-plays","limited")}w&&k.attr("disabled",!0);var T,O,_=i()({parent:b});function S(e){var t=Math.floor(e),n=t%60+"",r=Math.trunc(t/60)+"";n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),k&&k.val(t),E.safeHtml(r+":"+n)}function P(){p&&v&&v.safeHtml(g())}function I(){T&&clearInterval(T),T=setInterval((function(){S(_.getCurrentTime())}),500),w&&(O&&clearInterval(O),O=setInterval((function(){a(p,Math.floor(_.getCurrentTime()))}),1e4))}function R(){clearInterval(T),w&&(clearInterval(O),a(p,Math.floor(_.getCurrentTime())))}return _.setAudioData(t),w&&function e(){var t=u();!t||h||m?setTimeout(e,100):(p=t.numberOfPlays,_.goToTime(t.numberOfSeconds),S(_.getCurrentTime()),P(),m=!0,p>w&&b.attr("data-plays","disabled"))}(),window.addEventListener("clearReset",(function(e){_.pause(),p=1,_.goToTime(0),S(_.getCurrentTime()),w?(P(),b.attr("data-plays","limited")):b.attr("data-plays","enabled")}),!1),C.tapOrClick((function(e){e.stopPropagation();var t=b.attr("state");(!w||p<=w)&&("playing_paused"===t?_.resume():_.play())})),y.tapOrClick((function(e){e.stopPropagation();var t=b.attr("state");"inactive"!==t&&"playing"===t&&_.pause()})),A.tapOrClick((function(e){e.stopPropagation();var t=b.attr("state");if(w){if("inactive"===t)return;"playing"===t&&_.pause()}else{if("inactive"===t)return;"playing"!==t&&"playing_paused"!==t||(_.pause(),_.goToTime(0),b.attr("state","stopped"),b.removeClass("active"),S(_.getCurrentTime()))}})),k.tapOrClick((function(e){e.stopPropagation()})),k.on("input",(function(e){if(e.stopPropagation(),!w){var t=b.attr("state");e.target.value!==Math.floor(_.getCurrentTime())&&("playing_paused"===t&&(_.goToTime(e.target.value),S(_.getCurrentTime())),"playing"===t&&(_.pause(),_.goToTime(e.target.value),S(_.getCurrentTime()),_.resume()),"stopped"===t&&(_.goToTime(e.target.value),S(_.getCurrentTime()),b.attr("state","playing_paused")))}})),_.addEventListener("play",(function(){b.attr("state","playing"),h=!0,I()})),_.addEventListener("durationchange",(function(){var e,t,n;t=(e=Math.floor(_.getDuration()))%60+"",n=Math.trunc(e/60)+"",t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),k&&k.attr("max",e),x.safeHtml(n+":"+t)})),_.addEventListener("ended",(function(){b.attr("state","stopped"),S(0),R(),w&&(p+=1,P(),a(p,0),p>w&&b.attr("data-plays","disabled"))})),_.addEventListener("pause",(function(){b.attr("state","playing_paused"),S(_.getCurrentTime()),R()})),_.addEventListener("playing",(function(){b.attr("state","playing"),I()})),{player:_}}function h(){o()("audio").each((function(){this.duration>0&&!this.paused&&this.pause()}))}function m(e){0===e.find(".bw-audio-player").length&&e.each((function(e){p(o()(this),o()(this).attr("src")||o()(this).find("source").attr("src"),!0,0,(function(){}),(function(){}))}))}function w(e,t){var n={play:function(e){if(void 0===this.element)return!1;var t;try{return e&&(t=this.element,this.element.addEventListener("playing",(function n(){t.removeEventListener("playing",n),e()}))),this.element.play()}catch(e){return null}},pause:function(){if(void 0===this.element)return!1;try{return this.element.pause(),!0}catch(e){return!1}},paused:function(){return void 0!==this.element&&this.element.paused()},toggle:function(){void 0!==this.paused()&&!0===this.paused()?(h(),this.play()):this.pause()},rewind:function(){if(void 0===this.element)return!1;try{return this.element.goToTime(0),!0}catch(e){return!1}},setVolume:function(e){if(void 0===this.element)return!1;try{return this.element.setVolume(e),!0}catch(e){return!1}},on:function(e,t){if(void 0===this.element)return!1;try{return this.element.addEventListener(e,t),!0}catch(e){return!1}},onLoaded:function(e){this.element?e():this.onLoadedCB=e}};return n.element=i()({parent:t}),n.obj=n.element.player[0],n.element.setAudioData(e),n}function g(e,t,n,r,a){if(t){var i=o()(document.createElement("div")).addClass("audiowrapper");return o()(document.createElement("div")).addClass("audio-placeholder").attr("data-src",e).appendTo(i),i}return{control:i=o()(document.createElement("div")).addClass("audiowrapper"),player:p(i,e,!1,n,r,a)}}function b(e,t){if(t){var n=o()(document.createElement("div")).addClass("audiowrapper");return o()(document.createElement("div")).addClass("audio-placeholder").attr("data-src",e).appendTo(n),n}return p(n=o()(document.createElement("div")).addClass("audiowrapper"),e,!1,0,(function(){}),(function(){})),n}function v(e){e instanceof o()?m(e.find("audio:not(.no-audio-wrap)")):m(o()(e+" audio"))}function D(e,t){return w(e,t)}var C={pauseAll:h,process:m,createElement:w,createPlayerLimited:g,createPlayer:b,processAudioTags:v,addElement:D};window.BWAUDIO=C},89372:function(e,t,n){var r,o,a,i,u,s=n(45127).loadJS;e.exports=(r=n(937),o=n(58436),a=n(21506),i=n(76176),u={},window.BWMATH=u,u.disabled=!1,u.nextUniqueId=1,u.queue=[],u.customCssClasses=[],u.initialized=!1,u.initialize=function(){if(!1===this.initialized&&-1!==o.getPlatform().indexOf("chrome")){var e=a(document.createElement("div")).attr("id","chromemathjaxhack").css({position:"absolute","pointer-events":"none"}).prependTo(a("body")),t=a(document.createElement("canvas")).attr({width:300,height:300}).appendTo(e)[0];t.getContext("2d").clearRect(0,0,t.width,t.height),this.initialized=!0}},u.prepare=function(e){if(this.disabled)return e;var t="",n=0,r=e.indexOf("$$"),o=0;for(r>=0&&this.initialize();r>=0&&!(++o>1e4);){t+=e.substring(n,r);var a=e.indexOf("$$",r+2);if(a<0){n=r;break}t+='<span class="bwmathquill" style="direction:ltr; visibility: hidden">\\('+e.substring(r+2,a)+"\\)</span>",n=a+2,r=e.indexOf("$$",n)}return t+e.substring(n)},u._createCssClass=function(e,t){var n=document.createElement("style");n.type="text/css",document.getElementsByTagName("head")[0].appendChild(n),(n.sheet||{}).insertRule?n.sheet.insertRule("."+e+"{"+t+"}",0):(n.styleSheet||n.sheet).addRule(e,t),u.customCssClasses.push(e)},u._copyColorToStrokeAndFill=function(e){var t=e.css("color");e.find("g[stroke]").attr("stroke",null).attr("fill",null);var n="bw-math-jax-expression-"+u.nextUniqueId++,r="stroke: "+t+"; fill: "+t+";";u._createCssClass(n,r),e.addClass(n)},u.schedule=function(e){void 0!==window.MathJax&&window.MathJax.hasOwnProperty("Hub")&&window.MathJax.Hub.hasOwnProperty("Queue")?window.MathJax.Hub.Queue(e):u.queue.push({cb:e})},u.findMathElems=function(e){return e.find(".bwmathquill")},u.allMathElems=function(){return a(".bwmathquill")},u.processMathElems=function(e){var t=this.findMathElems(e);return t.length>0&&(this.process(t),!0)},u.redrawMathElems=function(e){this.redraw(this.findMathElems(e))},u.processAll=function(){this.process(this.allMathElems())},u.redrawAll=function(){this.redraw(this.allMathElems())},u.process=function(e){this.disabled||e.each((function(){if(void 0!==window.MathJax&&window.MathJax.hasOwnProperty("Hub")&&window.MathJax.Hub.hasOwnProperty("Queue")){var e=this;window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,e],(function(){u._copyColorToStrokeAndFill(a(e)),a(e).css("visibility","")}))}else u.queue.push({obj:a(this)})}))},u.processqueue=function(){for(;u.queue.length>0;){var e=u.queue.shift();e.obj&&u.process(e.obj),e.cb&&u.schedule(e.cb)}},window.MathJax={showMathMenu:!1,skipStartupTypeset:!0},"ibw-platform-win32-preview"==o.getPlatform()&&(window.MathJax.SVG={scale:200}),u.loadMathJax=function(){s("external/MathJax24/MathJax.js?config=TeX-AMS-MML_SVG").then(u.processqueue.bind(u))},u.widgetUsesLatex=function(e){return e.hasOwnProperty("modules")&&-1!==e.modules.indexOf("MathJax24")},u.scheduleOrExecuteIfNoLatex=function(e){r.getConfig().then((function(t){u.widgetUsesLatex(t)?u.schedule(e):e()}))},r.getConfig().then((function(e){u.widgetUsesLatex(e)?u.loadMathJax():u.disabled=!0})),u.redraw=function(e){},i.CssUpdateCallbacks&&i.CssUpdateCallbacks.push((function(){var e=u.customCssClasses;u.customCssClasses=[];for(var t=0;t<e.length;++t){var n=e[t],r=a("."+n);r.removeClass(n),u._copyColorToStrokeAndFill(r)}})),u.isOnlyMath=function(e){var t=e.trim();return t.startsWith("$$")&&t.endsWith("$$")&&-1===t.substring(2,e.length-4).indexOf("$$")},u)},92824:function(e,t,n){"use strict";n.d(t,{adjustRichTextVideoSize:function(){return h},createHtml5VideoPlayer:function(){return p},resolveYoutubePlaceholders:function(){return m}});var r=n(44334),o=n(57873),a=n(58436),i=n(21506),u=n.n(i),s=n(91845),c=0,l=!1,d=[];function f(){if(void 0!==window.YT&&void 0!==window.YT.Player)for(var e=0;e<d.length;++e)d[e]();else setTimeout(f,100)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"video/mp4",o=u()(document.createElement("video")).attr({controls:"",preload:"auto",poster:""});return null!=t&&o.attr("width",t),null!=n&&o.attr("height",n),u()(document.createElement("source")).attr({src:e,type:r}).appendTo(o),o}function h(e){"0px"===e.css("width")&&null==e.css("float")||"none"===e.css("float")?e.css({width:"640px",height:"400px","max-width":"90%"}):e.css({width:"320px",height:"240px"})}function m(e){function t(e,t){var n=t.width(),r=t.height(),o=u()(document.createElement("div")).addClass("videodiv").css({width:n,height:r}).appendTo(t);return u()(document.createElement("iframe")).attr({frameborder:"0",webkitAllowFullScreen:"",mozallowfullscreen:"",allowFullScreen:""}).css({width:n,height:r}).appendTo(o).attr("src",e.trim()),o}e.find(".youtubeplaceholder").each((function(){var e=u()(this);if(void 0===e.attr("id")){var n="YTP_"+c++;e.attr("id",n);var i=e.attr("src");h(e),(0,o.aJ)(i)?function(e,t){var n,i=u()(e),c=i.attr("id");if(null==c&&(c=(0,r.randomId)(20),i.attr("id",c)),"ibw-platform-win32-preview"===a.getPlatform()||"ibw-platform-osx-preview"===a.getPlatform())return i.safeHtml("<br>Youtube videos are not supported in preview mode."),void i.css({"background-color":"black",color:"white","text-weight":"bold","text-align":"center"});function p(){var n=u()(e),r={rel:0},a=(0,o.hC)(t);0!==a&&(r.start=a);var i=(0,o.U0)(t);0!==i&&(r.end=i);var s=(0,o.oj)(t);null!=s&&(r.cc_lang_pref=s);var l=(0,o.Z7)(t);null!=l&&(r.cc_load_policy=l);var d=(0,o.qS)(t);new window.YT.Player(c,{height:n.height(),width:n.width(),videoId:d,playerVars:r})}void 0!==window.YT&&void 0!==window.YT.Player?p():(d.push(p),l||(l="true",(n=document.createElement("script")).setAttribute("type","text/javascript"),n.setAttribute("src",(0,s.Z)("http://www.youtube.com/player_api")),document.getElementsByTagName("body")[0].appendChild(n),setTimeout(f,100)))}("#"+n,i):(0,o.pn)(i)?function(e,n){t((0,s.Z)("http://player.vimeo.com/video")+"/"+(0,o.L2)(e),n).addClass("bw-vimeo-wrapper")}(i,u()("#"+n)):(0,o.Cj)(i)?function(e,n){t((0,s.Z)("http://giphy.com/embed")+"/"+(0,o.BZ)(e),n).addClass("bw-giphy-wrapper")}(i,u()("#"+n)):console.error("Unsupported video URL: "+i)}}))}},91845:function(e,t,n){"use strict";function r(e){var t="file:";window&&window.location&&window.location.protocol&&(t=window.location.protocol);var n="";return 0===e.indexOf("http://")?n="http://":0===e.indexOf("https://")?n="https://":0===e.indexOf("//")&&(n="//"),""!==n?"file:"===t||"http:"===t?"//"===n?"http:"+e:e:"https:"===t&&"http://"===n?e.replace("http://","https://"):"//"===n?"https:"+e:e:e}n.d(t,{Z:function(){return r}})},97462:function(e,t,n){var r=n(21506);e.exports=function(e){var t=r(document.createElement("audio")).addClass("bw-audio-recorder-player no-audio-wrap bw-audio-player-audio").attr("controls","false").appendTo(e.parent);return{player:t,setAudioData:function(e,n){e&&t.attr({url:e,type:n,src:null})},pause:function(){t[0].pause()},paused:function(){return t[0].paused},resume:function(){t[0].play()},play:function(){t.attr("src",t.attr("url")),t[0].play()},stop:function(){t.attr("src",null)},getDuration:function(){return parseInt(t[0].duration)},clear:function(){t.attr({url:"",src:"",type:""})},addEventListener:function(e,n){t[0].addEventListener(e,n)},removeEventListener:function(e,n){t[0].removeEventListener(e,n)},goToTime:function(e){null==t.attr("src")&&t.attr("src",t.attr("url")),t[0].currentTime=e},setVolume:function(e){t[0].volume=e},getCurrentTime:function(){return t[0].currentTime}}}},937:function(e,t,n){"use strict";n.r(t),n.d(t,{extractOnlineResources:function(){return q},fixResourcePaths:function(){return z},getConfig:function(){return J},getConfigSync:function(){return Y},inverseFixResourcePaths:function(){return V},inverseReplaceResourceDir:function(){return U},replaceResourceDir:function(){return W}});var r=n(16760),o=n.n(r),a=n(21506),i=n(90985).getParameters,u=n(45127),s=u.loadJS,c=u.loadCSS,l=!1,d=!1,f=new RegExp("https://www.bookwidgets.com/create/api/widgets/[0-9]+/preview/config.(css||js)?"),p=new RegExp("http://localhost(:[0-9]+)?/create/api/widgets/[0-9]+/preview/config.(css||js)?");function h(e){return window.WidgetParams?e:0===window.location.pathname.indexOf("/_ah/gcs/bookwidgets-eu--widgets/")?0===e.search(p)?e:window.location.origin+"/_ah/gcs/bookwidgets-eu--widget-assets"+e:window.location.host.startsWith("widgets-eu.")?0===e.search(f)?e:window.location.host.replace("widgets-eu.","//widget-assets-eu.")+e:e}var m=n(21506),w=n.n(m),g=n(75652),b=n.n(g);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=[],C=0,y=0,A=null;function E(e){console.log("Select design element",e),void 0!==window.previewsidebar?window.previewsidebar.setSelectedItem(e):window.parent.postMessage({command:"select-design-element",element:e})}function x(e){y=0;var t=!1,n=w()(e),r=function(){var e={};w().each(D,(function(r,o){var a,i,u=(i=2,function(e){if(Array.isArray(e))return e}(a=o)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(a,i)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(a,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],c=u[1];try{if(n.is(s)){var l=n.offset().top+"_"+n.offset().left;e[l]?e[l].elements.push(c):e[l]={offset:n.offset(),elements:[c]},t=!0}}catch(e){}})),w().each(e,(function(e,t){var n=w()(document.createElement("div")).addClass("bw-design-tooltip").attr("data-design-element",t.elements[0]).css({position:"absolute",top:t.offset.top,left:t.offset.left}).appendTo("body");w().each(b()(t.elements),(function(e,t){w()(document.createElement("a")).text(A&&A[t]?A[t]:t).attr("href","#").click((function(e){E(t),e.stopPropagation(),e.preventDefault()})).appendTo(n)}))})),n=n.parent()};do{r()}while(!1===t&&n.length>0)}function F(){w()(".bw-design-tooltip").remove()}function k(e){var t=e.target;w()(t).is(".bw-design-tooltip")||w()(t).is(".bw-design-tooltip a")||C!==t&&(0===y&&F(),clearTimeout(y),C=t,y=setTimeout(x.bind(null,t),400))}function B(){var e=w()(".bw-design-tooltip");0!==e.length&&E(e.attr("data-design-element"))}window.activateDesignInfoTooltips=function(e){A=e,window.addEventListener("mousemove",k),window.addEventListener("click",B)},window.disableDesignInfoTooltips=function(){F(),window.removeEventListener("mousemove",k),window.removeEventListener("click",B)};var T=[],O=!1;window.BwNotifyWidgetLoaded=function(){O||(O=!0,window.parent.postMessage("BwWidgetLoaded","*"),window.clientApp&&window.clientApp.widgetLoaded&&window.clientApp.widgetLoaded())};var _=!0;function S(){for(;T.length>0;)T.shift()();_&&window.BwNotifyWidgetLoaded()}function P(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}window.BwUseManualWidgetLoadedNotification=function(){_=!1};var j={},M=w().Deferred();function L(e,t,n){if(null==e)return e;if("string"==typeof e)return e.replace(t,n);if(w().isArray(e)){for(var r=[],o=0;o<e.length;++o)r.push(L(e[o],t,n));return r}if("object"===R(e)){var a={};for(var i in e)e.hasOwnProperty(i)&&(a[i]=L(e[i],t,n));return a}return e}function W(e,t){return t?L(e,/\$RESOURCEDIR/g,t):e}function U(e,t){return t&&"."!==t?L(e,new RegExp(t,"g"),"$RESOURCEDIR"):e}function H(e,t,n){var r=[];if("string"==typeof e)e.startsWith(t)?r.push({resource:e,type:"full",path:n}):(r.push.apply(r,P(o()(P(e.matchAll(new RegExp("(')("+t+"[^']+)'","g"))),(function(e){return{resource:e[2],type:e[1],path:n}})))),r.push.apply(r,P(o()(P(e.matchAll(new RegExp('(")('+t+'[^"]+)"',"g"))),(function(e){return{resource:e[2],type:e[1],path:n}})))));else if(w().isArray(e))for(var a=0;a<e.length;++a)r.push.apply(r,P(H(e[a],t,n+"/"+a)));else if("object"===R(e))for(var i in e)e.hasOwnProperty(i)&&r.push.apply(r,P(H(e[i],t,n+"/"+i)));return r}function N(){var e=".";return window.WidgetResourceBase?window.WidgetResourceBase:(0===window.location.pathname.indexOf("/_ah/gcs/bookwidgets-eu--widgets/")?e=window.location.origin+"/_ah/gcs/bookwidgets-eu--widget-assets":window.location.host.startsWith("widgets-eu.")&&(e=window.location.host.replace("widgets-eu.","https://widget-assets-eu.")),e)}function z(e){return W(e,N())}function V(e){return U(e,N())}function q(e){if("."===N())return[];try{return H(e,N(),"")}catch(e){return console.error("Could not extract resources: ",e),[]}}function J(){return M}function Y(){return j}(function(){var e=i(!1);e.dbg5&&n(34089)({apiKey:e.dbg5,autoCaptureSessions:!1,notifyReleaseStages:["production"],releaseStage:"production",beforeSend:function(e){return 1!==e.stacktrace.length||1!==e.stacktrace[0].lineNumber}});var t=a.Deferred();if(!1===d&&!1===l){l=!0;var r=h(e.content)||"config.js",o=h(e.design)||"config.css";a.when(s(r),c(o)).fail((function(){t.reject(new Error("Unable to load config file"))})).always((function(e,n){n&&a(n).attr("id","designconfig"),l=!1,d=!1;var r=window.widgetconfig;t.resolve(r),-1===navigator.userAgent.indexOf("ibookwidgets")&&(window.widgetconfig=void 0)}))}return t})().then((function(e){var t=function(e){return z(function e(t){if("string"==typeof t)return function(e){for(var t="",n=0;n<e.length;++n)2*n<e.length?t+=e.charAt(2*n):t+=e.charAt(2*(e.length-n)-1);return t}(t);if(w().isArray(t)){for(var n=[],r=0;r<t.length;++r)n.push(e(t[r]));return n}if("object"===R(t)){var o={};for(var a in t)t.hasOwnProperty(a)&&(o[a]=e(t[a]));return o}return t}(e))}(e);for(var n in t)j[n]=t[n];(function(e){if(e.hasOwnProperty("LocalizationMap")&&(window.bwlocalizationmap=e.LocalizationMap),"bwshortcode"in e&&(window.bwshortcode=e.bwshortcode),"pre"in e&&(console.log("Preview"),"designinfo"in e)){for(var t=0;t<e.designinfo.length;++t)n=e.designinfo[t].s,r=e.designinfo[t].d,D.push([n,r]);"undefined"!=typeof previewsidebar?(console.log("Previewsidebar is defined, immediately set design config"),w()((function(){var e;e=function(){window.CssUpdateCounter&&(console.log("has CssUpdateCounter -> updating configCss"),window.updateConfigCSS(window.CssUpdateCounter)),setTimeout((function(){window.activateDesignInfoTooltips()}),3e3)},T.push(e)}))):(window.parent.postMessage({command:"enable-design-config-support"},"*"),window.addEventListener("beforeunload",(function(){window.parent.postMessage({command:"disable-design-config-support"})})))}var n,r;if("bra"in e&&w()((function(){"iPad"===navigator.platform&&-1!==navigator.userAgent.indexOf("BookWidgets")||w()(document.createElement("div")).addClass("branding").appendTo("body")})),"tri"in e&&w()((function(){if("iPad"===navigator.platform||-1===navigator.userAgent.indexOf("BookWidgets")&&-1===navigator.userAgent.indexOf("ibookwidgets")){w()(document.createElement("div")).addClass("dialog-sheet").attr("id","preview_alert").css({color:"red","text-shadow":"none"}).append(w()(document.createElement("p")).safeHtml("This is a free preview widget, created using a trial version of BookWidgets. <b>This widget may only be used for demonstration and evaluation purposes!</b>")).append(w()(document.createElement("p")).text("Please purchase a license key for the BookWidgets tool to remove this message.")).appendTo("body");var e=w()(document.createElement("div")).addClass("dialog-sheet-shadow");w()(document.body).append(e),window.CreateDialogSheetFor("#preview_alert"),setTimeout((function(){w()("#preview_alert").data("dialogSheet").show()}),2e3),setTimeout((function(){w()("#preview_alert").data("dialogSheet").hide()}),6e3),setTimeout((function(){w()("#preview_alert").data("dialogSheet").show()}),3e4),setTimeout((function(){w()("#preview_alert").data("dialogSheet").hide()}),34e3)}})),void 0===String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")}),window.getWidgetUrl=function(){return window.location.href},window.bwbackbuttonlabel=null,"performance"in window==0&&(window.performance={}),"now"in window.performance==0){var o=Date.now();window.performance.timing&&window.performance.timing.navigationStart&&(o=window.performance.timing.navigationStart),window.performance.now=function(){return Date.now()-o}}e.hasOwnProperty("backbutton_label")&&""!==e.backbutton_label&&(window.bwbackbuttonlabel=e.backbutton_label),"Vertical"===e.widget_orientation?w()("html").addClass("vertical"):w()("html").addClass("horizontal"),null!=e.widget_language&&""!==e.widget_language&&w()("html").attr("lang",e.widget_language),"no"===e.allow_browser_translation&&w()("html").attr("translate","no"),setTimeout(S,0)})(j),M.resolve(j)}))},68500:function(e,t,n){"use strict";n.r(t);var r=n(76176),o=n(21506),a=n.n(o);window.addEventListener("message",(function(e){var t=e.data;"set-css"===t.command?(function(e){a()("style[id='designconfig'], link[id='designconfig']").remove();var t=document.createElement("style");t.id="designconfig",t.type="text/css",t.appendChild(document.createTextNode(e)),document.head.appendChild(t)}(t.css),r.executeCssUpdateCallbacks()):"show-css-config-elements"===t.command?window.activateDesignInfoTooltips(t.translations):"hide-css-config-elements"===t.command&&window.disableDesignInfoTooltips()}))},35048:function(e,t,n){"use strict";n.r(t),n.d(t,{navigateAlert:function(){return u},showAlert:function(){return i},showConfirmationDialog:function(){return s},showCriticalAlert:function(){return c},showFatalAlert:function(){return l},showInfoMessage:function(){return d}});var r=n(72779),o=n(35226),a=n(21506);function i(e,t,n,r,i){i=i||i+" custom_alert",n=n||o("Ok"),t=t||"Alert",e=e||"No Message to Display";var u=a(document.createElement("div")),s={};return s[n]=function(){a(this).dialog("close"),a(this).remove(),r&&r()},u.safeHtml(e).dialog({title:t,dialogClass:"bw-dialog no-close "+i,resizable:!1,modal:!0,width:"auto",buttons:s}),u}function u(e,t,n,r){var o=i(e,t,n,(function(){}));return o.parent().find("button").replaceWith(a(document.createElement("a")).safeHtml(n).attr({href:r,target:"_top"}).addClass("ui-button")),o}function s(e,t,n,o,i,u,s){t||(t="Please confirm"),e||(e=""),i||(i="OK"),u||(u="Cancel"),a("#BwConfirmationDalog").remove();var c=a(document.createElement("div")).attr("id","BwConfirmationDialog"),l={};return l[i]=function(){a(this).dialog("close"),a(this).remove(),n&&n()},l[u]=function(){a(this).dialog("close"),a(this).remove(),o&&o()},c.safeHtml(e).dialog({title:t,dialogClass:r("bw-dialog BwConfirmationDialog no-close",s&&"bw-confirmation-warning"),open:function(){a(this).parent().find(".ui-dialog-buttonpane button:eq(1)").focus()},resizable:!1,modal:!0,width:500,buttons:l}),c}function c(e,t){var n={message:e,title:t};0===a("#critical-alert-button").length&&a(document.createElement("div")).attr("id","critical-alert-button").addClass("bw-toolbutton").append(a(document.createElement("div")).addClass("bw-icon bw-icon-critical-error")).prependTo(a("#title-toolbar")).click(i),i(n.message,n.title)}function l(e,t){a(document.createElement("div")).safeHtml(e).dialog({title:t,dialogClass:"bw-dialog no-close",resizable:!1,modal:!0,width:"auto"})}function d(e){console.log("ShowInfoMessage");var t=a(document.createElement("div"));function n(){t.removeClass("bw-dialog-animate-in").addClass("bw-dialog-animate-out"),setTimeout((function(){t.remove()}),500)}t.safeHtml(e).addClass("bw-dialog bw-info-dialog bw-dialog-animate-in").click((function(e){e.stopPropagation(),n()})).appendTo(a("body")),setTimeout(n,1e4)}},72324:function(e,t,n){"use strict";n.d(t,{processEmbeddedIframes:function(){return u}});var r=n(92824),o=n(21506),a=n.n(o);function i(e){e.attr("src").toLowerCase().endsWith("mp4")?function(e){e.replaceWith(r.createHtml5VideoPlayer(e.attr("src")))}(e):(function(e){var t=["allow-downloads","allow-forms","allow-modals","allow-pointer-lock","allow-popups","allow-popups-to-escape-sandbox","allow-same-origin","allow-scripts","allow-top-navigation-by-user-activation"];null!=document.hasStorageAccess&&t.push("allow-storage-access-by-user-activation");try{e.attr({allow:"microphone; camera",sandbox:t.join(" "),allowfullscreen:""})}catch(e){console.log()}}(e),e.attr("src",e.attr("src")))}function u(e){e.each((function(){i(a()(this))}))}n(44166)},25081:function(e,t,n){"use strict";n.d(t,{processRichTextImages:function(){return a}});var r=n(21506),o=n.n(r);function a(e){e.find("img").attr({height:"",draggable:"false"}).css("max-width","100%").each((function(){var e=o()(this),t=e.css("float");"left"===t?e.css({"margin-right":"10px","margin-bottom":"10px"}):"right"===t&&e.css({"margin-left":"10px","margin-bottom":"10px"})}))}},45127:function(e,t,n){"use strict";n.r(t),n.d(t,{adaptWidgetLoadPath:function(){return u},loadCSS:function(){return c},loadJS:function(){return s}});var r=n(21506),o=n.n(r),a=n(58436);function i(e){if(window.WidgetParams){if(e&&window.WidgetParams.externalRootURL)return window.WidgetParams.externalRootURL;if(window.WidgetParams.rootURL)return window.WidgetParams.rootURL}return(0,a.isWebPreview)()||window.location.protocol.startsWith("http")&&null!=window.bwshortcode?window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/",window.location.pathname.lastIndexOf("/")-1)):window.location.protocol.startsWith("http")&&null==window.bwshortcode?window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/")):""}function u(e,t){return e.startsWith("../")?i(t)+e.substring(2):e.startsWith("http://")||e.startsWith("https://")?e:window.WidgetParams&&window.WidgetParams.rootURL?i(t)+"/"+e:e}function s(e,t,n){e=u(e);var r=o().Deferred(),a=document.createElement("script");if(a.setAttribute("type","text/javascript"),n)for(var i in n)n.hasOwnProperty(i)&&a.setAttribute(i,n[i]);return a.onload=function(){r.resolve()},a.onerror=function(){window.navigator&&window.navigator.userAgent&&-1===window.navigator.userAgent.indexOf("PhantomJS")&&-1===window.navigator.userAgent.indexOf("HeadlessChrome")&&console.error("Could not load: "+e),r.reject()},a.setAttribute("src",e),document.getElementsByTagName(t||"head")[0].appendChild(a),r}function c(e,t){e=u(e);var n=o().Deferred(),r=document.createElement("link");return r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.onload=function(){n.resolve(r)},r.onerror=function(){window.navigator&&window.navigator.userAgent&&-1===window.navigator.userAgent.indexOf("PhantomJS")&&-1===window.navigator.userAgent.indexOf("HeadlessChrome")&&console.error("Could not load: "+e),n.reject()},r.setAttribute("href",e),document.getElementsByTagName(t||"head")[0].appendChild(r),n}window.adaptWidgetLoadPath=u},6296:function(e,t,n){e.exports=(n(937),{useManualNotify:window.BwUseManualWidgetLoadedNotification,notifyLoaded:window.BwNotifyWidgetLoaded})},24021:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r){r=Object(r);for(var o=Object.keys(Object(r)),a=0,i=o.length;a<i;a++){var u=o[a],s=Object.getOwnPropertyDescriptor(r,u);void 0!==s&&s.enumerable&&(t[u]=r[u])}}}return t}})},58436:function(e,t,n){"use strict";n.r(t),n.d(t,{getIOSIBooksRestartInfo:function(){return m},getPlatform:function(){return a},inIframe:function(){return w},isAndroidIosDevice:function(){return s},isIOS:function(){return p},isInternetExplorer:function(){return h},isPreview:function(){return l},isToolPreview:function(){return i},isTopLevelPlay:function(){return d},isTouchDevice:function(){return f},isWebPreview:function(){return u},supportsAppFeature:function(){return c}});var r=n(90985);function o(){var e=window.navigator.userAgent,t=e.indexOf("OS ");return(e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&t>-1?window.Number(e.substr(t+3,3).replace("_",".")):0}function a(){return window.BW_PLATFORM_HACK?window.BW_PLATFORM_HACK:"iPad"===navigator.platform||"iPhone"===navigator.platform?void 0!==navigator.epubReadingSystem&&"iBooks"===navigator.epubReadingSystem.name?"ibw-platform-ipad-ibooks-epub":-1!==navigator.userAgent.indexOf("SEB")?"ibw-platform-ipad-seb":-1!==navigator.userAgent.indexOf("Safari")?"ibw-platform-ipad-safari":-1!==navigator.userAgent.indexOf("BookWidgets")?"ibw-platform-ipad-bookwidgets":"http:"!==window.location.protocol&&"https:"!==window.location.protocol?"ibw-platform-ipad-other":"ibw-platform-ipad":"MacIntel"===navigator.platform?void 0!==navigator.epubReadingSystem&&"iBooks"===navigator.epubReadingSystem.name?"ibw-platform-osx-ibooks-epub":-1!==navigator.userAgent.indexOf("PhantomJS")?"ibw-platform-osx-phantomjs":-1!==navigator.userAgent.indexOf("HeadlessChrome")?"ibw-platform-osx-headlesschrome":-1!==navigator.userAgent.indexOf("ibookwidgets")?"ibw-platform-osx-preview":-1!==navigator.userAgent.indexOf("Chrome")?"ibw-platform-osx-chrome":-1!==navigator.userAgent.indexOf("Safari")?"ibw-platform-osx-safari":-1!==navigator.userAgent.indexOf("Firefox")?"ibw-platform-osx-firefox":"http:"!==window.location.protocol&&"https:"!==window.location.protocol?"ibw-platform-osx-other":"ibw-platform-osx":"Win32"===navigator.platform?-1!==navigator.userAgent.indexOf("BookWidgets")?"ibw-platform-win32-preview":"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&-1!==navigator.userAgent.indexOf("Trident")||"Netscape"===navigator.appName&&-1!==navigator.userAgent.indexOf("Edge")?"ibw-platform-win32-ie":-1!==navigator.userAgent.indexOf("Chrome")?"ibw-platform-win32-chrome":-1!==navigator.userAgent.indexOf("Firefox")?"ibw-platform-win32-firefox":"ibw-platform-win32":"iPad Simulator"===navigator.platform||"iPhone Simulator"===navigator.platform?"ibw-platform-ipad-bookwidgets":-1!==navigator.userAgent.indexOf("Android")?-1!==navigator.userAgent.indexOf("Chrome")?"ibw-platform-android-chrome":"ibw-platform-android":-1!==navigator.userAgent.indexOf("CrOS")?-1!==navigator.userAgent.indexOf("Chrome")?"ibw-platform-chromebook-chrome":"ibw-platform-chromebook":"ibw-platform-unknown"}function i(){return-1!==a().indexOf("preview")}function u(){return"1"===(0,r.getUrlParams)(window.location.href).preview||window.WidgetParams&&window.WidgetParams.preview}function s(){var e=a();return 0===e.indexOf("ibw-platform-ipad")||0===e.indexOf("ibw-platform-android")}function c(e){var t=/BookWidgets\/([0-9]+)\.([0-9]+)\.([0-9]+)/g.exec(navigator.userAgent),n=t&&4===t.length?1e4*parseInt(t[1])+100*parseInt(t[2])+parseInt(t[3]):0;return console.log(e+" "+n),"audiorecording"===e&&n>=20800}function l(){return i()||u()}function d(){return"1"===(0,r.getUrlParams)(window.location.href).toplevel}function f(){return s()||(t=" -webkit- -moz- -o- -ms- ".split(" "),"ontouchstart"in window||(e=["(",t.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(e).matches));var e,t}function p(){return!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}function h(){return-1!==window.navigator.userAgent.indexOf("MSIE ")||/rv:11.0/i.test(window.navigator.userAgent)}function m(){return o()>=7?'To close iBooks:<ol style="text-align: left;"><li>Double-click the Home button.</li><li>Swipe left or right until you have located iBooks.</li><li>Swipe the app\'s preview up to close it.</li></ol>':o()>=5?"To close iBooks:<ol style=\"text-align: left;\"><li>Double-click the Home button.</li><li>Touch-and-hold the iBooks icon to put it into 'jiggly mode'.</li><li>Tap the red minus-sign icon that appears at the top left corner of iBooks.</li><li>Click the Home button to exit 'jiggly mode'.</li></ol>":""}function w(){try{return window.self!==window.parent}catch(e){return!0}}},99290:function(e,t,n){"use strict";n.r(t),n(78793),n(30017),n(32009),n(98728),n(87189),n(27708),n(24021),n(78881),n(9716),void 0===n.g&&(window.global=window)},70882:function(e,t,n){"use strict";n.r(t),n.d(t,{setPreparePrint:function(){return l}});var r=n(58436);function o(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function a(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var i=a((function(){return function(e){if(e&&e.then)return e.then(c)}(function(e,t){try{var n=s(u,(function(){window.print()}))}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(0,c))})),u=function(){return o(!0)};function s(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}function c(){}function l(e){u=e}window.addEventListener("message",a((function(e){return"print"===e.data.command&&i(),o()}))),(0,r.isToolPreview)()&&(window.doPrint=function(){return s(u,(function(){window.clientApp&&window.clientApp.doPrint&&window.clientApp.doPrint()}))})},5733:function(e,t,n){"use strict";n.d(t,{isEmptyRichText:function(){return d},process:function(){return l}});var r=n(25081),o=n(56577),a=n(21506),i=n.n(a),u=n(72324),s=n(92824),c=n(44166);function l(e){e.addClass("bw-richtext"),r.processRichTextImages(e),function(e){e.find("a.rtlink").each((function(){var e=i()(this);e.find("span").css({"text-decoration":"",color:""});var t=e.attr("target");!1!==t&&void 0!==t||e.attr("target","_top")}))}(e),(0,o.processRichTextWidgetPlayLinks)(e,!0),function(e){e.find("video").each((function(){(0,s.adjustRichTextVideoSize)(i()(this))}))}(e),function(e){e.find(".iframeplaceholder").each((function(){var e=i()(this),t=e.attr("src");e.replaceWith(i()(document.createElement("iframe")).addClass("rt-iframe").attr("src",t))}))}(e),(0,u.processEmbeddedIframes)(e.find(".rt-iframe")),function(e){e.find("table").addClass("bw-richtext-table").each((function(){var e=this.parentNode,t=document.createElement("div");t.style.overflowX="scroll",e.insertBefore(t,this),t.appendChild(this)}))}(e)}function d(e){return null==e||""===e.trim()||-1===e.indexOf("img")&&-1===e.indexOf("audio")&&-1===e.indexOf("iframe")&&-1===e.indexOf("video")&&-1===e.indexOf("src=")&&""===(0,c.appSafeUnescape)(e).trim()}},28524:function(e){e.exports=window.$},40904:function(e,t,n){"use strict";n.d(t,{setAutoDirectionIfRequired:function(){return o}});var r=n(44166);function o(e,t,n,o){(function(e){return null!=e&&e.endsWith("mixed")})(t)&&function(e,t,n){null==t?t=e.text():n&&(t=(0,r.appSafeUnescape)(t)),t.length>0?function(e){for(var t=[],n=new RegExp("^[֐-׾؀-۾܀-ݎݐ-ݾހ-޾߀-߾ࠀ-࠾ࡀ-࡞ࢠ-ࣾऀ-ॾ]|\ud802[\udf60-\udf7e]+$"),r=1,o=0;o<=r;o++)if(t[o]=e.substring(o-1,o),/\s/.test(t[o])&&r++,n.test(t[o]))return!0;return!1}(t)?e.css("direction","rtl"):e.css("direction","ltr"):console.log("setAutoDirection: no text")}(e,n,o)}},76176:function(e){e.exports=function(){var e=[];function t(){for(var t=0;t<e.length;++t)e[t]()}return{executeCssUpdateCallbacks:t,CssUpdateCallbacks:e,updateConfigCSS:function(e){for(var n=document.getElementsByTagName("link"),r=0,o=n.length;r<o;r++){var a=n[r],i=a.rel;if("string"!=typeof i||0===i.length||"stylesheet"===i){var u=a.getAttribute("href");0===u.indexOf("config")&&-1!==u.indexOf(".css")&&(a.setAttribute("href","config"+e+".css"),setTimeout(t,100))}}},addAllDesignInfo:function(){void 0!==window.addAllDesignInfo&&window.addAllDesignInfo()},addCSSUpdateCallback:function(t){e.push(t)}}}()},58405:function(e,t,n){"use strict";n.r(t);var r=n(21506),o=n.n(r);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var i=(0,n(58436).getPlatform)();-1!==i.indexOf("android")?o().fn.extend({clickOnDraggable:function(e){return this.each((function(){var t=!1;this.ClickOnDraggableCallback=e,o()(this).on("touchstart",(function(e){var n=e.originalEvent?e.originalEvent:e;1===n.changedTouches.length&&1===n.touches.length&&n.changedTouches[1]===n.touches[1]?(t=!0,setTimeout((function(){t&&(console.error("touch takes too long"),t=!1)}),100)):t=!1})),o()(this).on("touchend",(function(e){if(t){var n=e.originalEvent?e.originalEvent:e;1===n.changedTouches.length&&0===n.touches.length?(t=!1,this.ClickOnDraggableCallback()):t=!1}}))}))}}):o().fn.extend({clickOnDraggable:function(e){return this.each((function(){o()(this).click(e)}))}}),-1!==i.indexOf("android")||-1!==i.indexOf("preview")||-1!==i.indexOf("phantomjs")||-1!==i.indexOf("headlesschrome")||-1!==i.indexOf("chrome")||"ibw-platform-osx-safari"===i||"ibw-platform-osx-other"===i||"ibw-platform-osx-ibooks-epub"===i||"ibw-platform-unknown"===i?o().fn.extend({tapOrClick:function(e){return this.each((function(){o()(this).click(e);var t=this,n=o()(this);n.is("button")||n.is("a")||n.on("keydown",(function(n){var r=n.which;13!==r&&32!==r||e.bind(t)({preventDefault:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}})}))}))},tapOrClickOff:function(){return this.each((function(){o()(this).unbind("click");var e=o()(this);e.is("button")||e.is("a")||e.off("keydown")}))},triggerTapOrClick:function(e){return this.each((function(){o()(this).trigger("click",e)}))}}):o().fn.extend({tapOrClick:function(e){return this.each((function(){var t=this,n=o()(this);n.addClass("epub-block"),n.find("*").each((function(){this instanceof SVGElement&&o()(this).addClass("epub-block")}));var r=!1;n.hammer?"ibw-platform-ipad-bookwidgets"===i||"ibw-platform-ipad-seb"===i||"ibw-platform-ipad-ibooks-epub"===i||"ibw-platform-ipad-other"===i?n.hammer().on("tap",(function(o){!1===r&&(e.bind(t)(o),r=!0,setTimeout((function(){r=!1}),500)),n.blur(),o.stopImmediatePropagation()})):n.hammer().on("tap",(function(r){e.bind(t)(r),n.blur(),r.stopImmediatePropagation()})):n.click((function(r){e.bind(t)(r),n.blur()})),(n.hammer||!n.is("button")&&!n.is("a"))&&n.on("keydown",(function(n){var r=n.which;13!==r&&32!==r||e.bind(t)({preventDefault:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}})}))}))},tapOrClickOff:function(){return this.each((function(){var e=o()(this);e.hammer?e.hammer().off("tap"):e.unbind("click"),(e.hammer||!e.is("button")&&!e.is("a"))&&e.off("keydown")}))},triggerTapOrClick:function(e){return this.each((function(){var t=o()(this);t.hammer?t.hammer().trigger("tap",e):t.trigger("click",e)}))}}),o().fn.extend({clickOrHold:function(e,t,n){return n=n||3e3,this.each((function(){var r=!1,a=null;o()(this).click((function(t){r||e.bind(this)(t),r=!1})),o()(this).on("keydown",(function(t){var n=t.which;13!==n&&32!==n||e.bind(this)({prevent:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}})})),o()(this).on("mousedown touchstart",(function(){var e=this;a=setTimeout((function(){a=null,r=!0,t.bind(e)()}),n)})),o()(this).on("mouseup touchend",(function(){null!==a&&(clearTimeout(a),a=null),r&&setTimeout((function(){r=!1}),400)}))}))}}),o().fn.extend({makeButton:function(e){"string"==typeof(e=e||{})&&(e={label:e}),this.attr({role:e.hasOwnProperty("role")?e.role:"button"});var t=this.attr("tabindex");return"undefined"!==a(t)&&!1!==t||this.attr({tabindex:"0"}),e.hasOwnProperty("label")&&this.attr({"aria-label":e.label}),e.hasOwnProperty("labelledby")&&this.attr({"aria-labelledby":e.labelledby}),e.describedby&&this.attr("aria-describedby",e.describedby),this},makeLink:function(e){return this.attr({role:"link",tabindex:"0"}),e&&this.attr({"aria-label":e}),this}})},35226:function(e,t,n){e.exports=(n(937),function(e){try{return window.bwlocalizationmap&&window.bwlocalizationmap[e]&&""!==window.bwlocalizationmap[e]?window.bwlocalizationmap[e]:e}catch(t){return e}})},84615:function(e,t,n){var r,o;e.exports=(r=n(21506),o=n(35226),{createLabeledCheckbox:function(e,t,n,o,a){var i=r(document.createElement("table")).addClass("bw-checkbox").appendTo(e),u=r(document.createElement("tr")).appendTo(i),s=r(document.createElement("td")).addClass("bw-checkbox-cell").appendTo(u);function c(){return null!=o&&o>0&&r(e).find("[role=checkbox][checked=checked]").length>=o}function l(){r(e).toggleClass("bw-check-limit-reached",c())}return r(document.createElement("div")).addClass("bw-checkbox-checkbox bw-icon bw-icon-accept").appendTo(s),r(document.createElement("td")).addClass("bw-button-label-cell").append(r(document.createElement("div")).addClass("bw-button-label").safeHtml(t)).appendTo(u),i.bind("check",(function(){r(this).attr({checked:"checked","aria-checked":"true"}),l()})),i.bind("clear",(function(){r(this).attr({checked:null,"aria-checked":"false"}),l()})),i.makeButton({role:"checkbox",describedby:a}).tapOrClick((function(){var e=r(this);if("disabled"!==e.attr("disabled"))if("checked"===e.attr("checked"))e.trigger("clear"),n&&n.call(e[0],!1);else{if(c())return;e.trigger("check"),n&&n.call(e[0],!0)}})),i.trigger("clear"),i},createProgressBar:function(e,t){var n={};n.parent=e,n.max=t,r(document.createElement("div")).addClass("bw-progress-bar").css("left","-100%").appendTo(r(e));var o=100/t;return r(document.createElement("div")).addClass("bw-progress-bar-marker").css({left:"-100%",width:o+"%"}).appendTo(r(e)),n.setProgress=function(t,n,o){n=n||400;var a=100*-(this.max-parseFloat(t))/this.max,i=r(this.parent+"> .bw-progress-bar"),u=r(e).width(),s=-(this.max-parseFloat(t))*u/this.max;i.css("left",i.css("left")),i.animate({left:s},n,"swing",(function(){i.css("left",a+"%"),o&&o()}))},n.setPosition=function(t,n){n=n||400;var o=r(this.parent+"> .bw-progress-bar-marker"),a=100*parseFloat(t)/this.max,i=r(e).width()*t/this.max;o.css("left",o.css("left")),o.animate({left:i},n,"swing",(function(){o.css("left",a+"%")}))},n.clear=function(){r(this.parent+" .bw-progress-bar").css("left","-100%"),r(this.parent+" .bw-progress-bar-marker").css("left","-100%")},n},createSimpleCheckbox:function(e,t,n,o,a,i){var u=r(document.createElement("div")).addClass("bw-simple-checkbox bw-icon bw-icon-accept").appendTo(r(e)),s={role:"checkbox"};function c(){return null!=a&&a>0&&r(o).find("[role=checkbox][checked=checked]").length>=a}function l(){r(o).toggleClass("bw-check-limit-reached",c())}return n&&(s.labelledby=n),i&&(s.describedby=i),u.bind("check",(function(){r(this).attr({checked:"checked","aria-checked":"true"}),l()})),u.bind("clear",(function(){r(this).attr({checked:null,"aria-checked":"false"}),l()})),u.makeButton(s).tapOrClick((function(){var e=r(this);if("disabled"!==e.attr("disabled"))if("checked"===e.attr("checked"))e.trigger("clear"),t&&t.call(e[0],!1);else{if(c())return;e.trigger("check"),t&&t.call(e[0],!0)}})),u.trigger("clear"),u},createNumberButtons:function(e,t,n,a,i){function u(e){if(r(".buttonslot").removeClass("selected"),t<=9)r("#BS_"+e).addClass("selected");else if(e<5){r("#BS_1").removeClass("hide_number"),r("#BS_7").addClass("hide_number");for(var n=1;n<8;++n)r("#BS_"+n).find(".number-button").safeHtml(n+1);r("#BS_"+e).addClass("selected")}else if(t-e<6){r("#BS_1").addClass("hide_number"),r("#BS_7").removeClass("hide_number");for(var o=2;o<8;++o)r("#BS_"+o).find(".number-button").safeHtml(t-8+o);r("#BS_"+(9-(t-e))).addClass("selected")}else{r("#BS_1").addClass("hide_number"),r("#BS_7").addClass("hide_number");for(var u=1;u<8;++u)r("#BS_"+u).find(".number-button").safeHtml(u+e-3);r("#BS_4").addClass("selected")}0===e?r(a).addClass("hidden"):r(a).removeClass("hidden"),e===t-1?r(i).addClass("hidden"):r(i).removeClass("hidden")}r(e).addClass("bw-column-container");for(var s=0,c=Math.min(t,9),l=r(e),d=0;d<c;++d)r(document.createElement("div")).addClass("buttonslot bw-column-resizing").attr("id","BS_"+d).append(r(document.createElement("div")).addClass("number-button bw-button").text(d+1)).appendTo(l).find(".number-button").makeButton().tapOrClick((function(){u(s=parseInt(r(this).safeHtml())-1),n(s)}));function f(){--s<0&&(s=0),u(s),n(s)}function p(){++s>=t&&(s=t-1),u(s),n(s)}return t>9&&(r(document.createElement("div")).addClass("ellipsis").appendTo(r("#BS_1")),r(document.createElement("div")).addClass("ellipsis").appendTo(r("#BS_7")),r("#BS_7").addClass("hide_number"),r("#BS_7").find(".number-button").safeHtml(t-1),r("#BS_8").find(".number-button").safeHtml(t)),r("#BS_0").addClass("selected"),r(a).addClass("hidden"),r(a).makeButton(o("previous")).tapOrClick(f),r(i).makeButton(o("next")).tapOrClick(p),{updateButtons:u,next:p,prev:f}},createSimpleRadiobutton:function(e,t,n,o){var a=r(document.createElement("div")).addClass("bw-simple-radiobutton bw-icon").appendTo(r(e));a.bind("check",(function(){r(this).attr({checked:"checked","aria-checked":"true"})})),a.bind("clear",(function(){r(this).attr({checked:null,"aria-checked":"false"})}));var i={role:"radio"};return n&&(i.labelledby=n),o&&(i.describedby=o),a.makeButton(i).tapOrClick((function(){var e=r(this);"disabled"!==e.attr("disabled")&&("checked"===e.attr("checked")?(e.trigger("clear"),t&&t.call(e[0],!1)):(e.trigger("check"),t&&t.call(e[0],!0)))})),a.trigger("clear"),a},createLabeledRadiobutton:function(e,t,n,o){var a=r(document.createElement("table")).addClass("bw-radiobutton").appendTo(e),i=r(document.createElement("tr")).appendTo(a),u=r(document.createElement("td")).addClass("bw-radiobutton-cell").appendTo(i);return r(document.createElement("div")).addClass("bw-radiobutton-radiobutton bw-icon bw-icon-largedot").appendTo(u),r(document.createElement("td")).addClass("bw-button-label-cell").append(r(document.createElement("div")).addClass("bw-button-label").safeHtml(t)).appendTo(i),a.bind("check",(function(){r(this).attr({checked:"checked","aria-checked":"true"})})),a.bind("clear",(function(){r(this).attr({checked:null,"aria-checked":"false"})})),a.makeButton({role:"radio",describedby:o}).tapOrClick((function(){var e=r(this);"disabled"!==e.attr("disabled")&&("checked"===e.attr("checked")?(e.trigger("clear"),n&&n.call(e[0],!1)):(e.trigger("check"),n&&n.call(e[0],!0)))})),a.trigger("clear"),a},createProgressCircle:function(e,t,n){var o={},a=40,i=40;o.id=t,o.progress=Array(n);var u=r(document.createElement("div")).addClass("bw-progress-circle bw-centering-container").attr("id",t).appendTo(r(e));r(document.createElement("div")).addClass("bw-progress-circle-text bw-centered").appendTo(u);var s=[];function c(e,t){if(-1===e)return"";var r=2*Math.PI*e/n,o=2*Math.PI*(e+1)/n,u=a+Math.sin(r)*t,s=i-Math.cos(r)*t,c=a+Math.sin(o)*t,l=i-Math.cos(o)*t;return"M X1 Y1 A R R 0 0 1 X2 Y2".replace("X1",u).replace("Y1",s).replace("X2",c).replace("Y2",l).replace("D",r).replace("R",t).replace("R",t)}function l(e){return'<path d="'+c(e,30)+'"/>'}for(var d=0;d<n;++d)s.push(l(d));return r('<svg class="bw-progress-circle-drawing" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 80 80">'+s.join("")+'<path class="the marker"/></svg>').appendTo(u),o.setProgress=function(e,t){r("#"+this.id+" path:nth-child("+(e+1)+")").attr("class",t)},o.setTextAndPosition=function(e,t){var n=r("#"+this.id+" .bw-progress-circle-text");n.animate({opacity:0},200,"swing",(function(){n.empty().append(e).animate({opacity:1},200)}));var o=r("#"+this.id+" path.the.marker");o.animate({opacity:0},200,"swing",(function(){o.attr("d",c(t,30)).animate({opacity:1},200)}))},o}})},25750:function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(e){return"string"==typeof(n=e)||"object"===t(n)&&n.constructor===String?0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("//")?e.replace(/\(/g,"_").replace(/\)/g,"_").replace(/'/g,"%27"):encodeURIComponent(e).replace(/%2F/g,"/").replace(/'/g,"%27"):"";var n}},63584:function(e,t,n){"use strict";n.r(t),n.d(t,{replaceParamsBySessionLink:function(){return i},valueOrCacheValue:function(){return u}});var r=n(16760),o=n.n(r),a=["backbutton","backlink","q"];function i(e){if(""===e)return e;if("undefined"==typeof sessionStorage)return e;var t=e.substring(1).split("&"),n="cache_"+(new Date).getTime()+"_";return"?"+o()(t,(function(e){for(var t=0;t<a.length;++t)if(e.startsWith(a[t]+"=")&&!e.startsWith(a[t]+"=cache_")){var r=n+t;return sessionStorage.setItem(r,decodeURIComponent(e.substring(a[t].length+1))),a[t]+"="+r}return e})).join("&")}function u(e){return null==e?e:e.startsWith("cache_")?sessionStorage.getItem(e):e}},95792:function(e,t,n){var r=n(76635).isEmpty,o=n(63584).valueOrCacheValue,a=n(3328),i=a.instructionsAreEmpty,u=a.prepareInfoPopup,s=a.showInfoPopupIfFirstTimeInSession,c=n(90985).getUrlParams;n(58405),n(68500),n(70882),e.exports=function(e,t,n,a,l,d,f,p){function h(e){if(-1===e.indexOf("?"))return e;var t=/^([^?]*)\?/.exec(e);if(t&&2===t.length)return t[1];throw Error("Shoudln't happen")}function m(e,t){if(r(t))return e;var n=h(e),o=[];return a.each(t,(function(e,t){o.push(e+"="+t)})),n+"?"+o.join("&")}function w(){var e=c(window.location.href);return{backlink:e.hasOwnProperty("backlink")?o(e.backlink):null,backbutton:e.hasOwnProperty("backbutton")?o(e.backbutton):null}}function g(){var t=w().backlink,n=e.getPlatform();if("ibw-platform-osx-preview"===n||"ibw-platform-win32-preview"===n)console.log("Moving back by using history.back()"),window.history.back();else{var r=window.location.origin;t.startsWith(r)&&(t=t.substr(r.length)),console.log("Moving back by setting window.location to: "+t),window.location=t}}function b(){var e=w(),t=e.backlink,n=e.backbutton;null!=t&&(null!=n?a(document.createElement("div")).addClass("widget-backlink widget-backlink-text").safeHtml("&#9664; ").text(n).appendTo(a("body")):a(document.createElement("div")).addClass("widget-backlink widget-backlink-icon").appendTo(a("body"))).click(g)}var v=!1;function D(e){if(!v){var t=a("#top-container"),n=t.height(),r=t.width(),o=a(".closebutton-container"),i=a("#top-container .bw-toolbar");o.css("min-width",""),i.css("min-width","");var u=o.width(),s=i.width();if(i.css("min-width",u),o.css("min-width",s),a(".title-container").css("max-width",r-2*Math.max(u,s)),!0!==e&&a("#top-container").height()!==n){v=!0;try{window.onresize&&window.onresize()}catch(e){console.error("Error when calling onResize during centerWidgetTitle"),console.error(e)}v=!1}}}function C(){a("#top-container").removeClass("bw-show-popup-menu"),a("#title-toolbar").appendTo(a("#top-container .bw-toolbar")),a(".bw-menu-overlay").remove()}function y(){if(!(a("#menubutton").length>0)){var e=a("#top-container .bw-toolbar");if(e.children(":not(.outside-popup)").length>1){e.removeClass("bw-toolbar");var t=a(document.createElement("div")).addClass("bw-toolbar").attr("role","menubar").appendTo(a(".titlebar-layout"));e.find(".outside-popup").each((function(){a(this).appendTo(t)})),e.appendTo(t).addClass("bw-button-group"),a(document.createElement("div")).attr("id","menubutton").addClass("bw-toolbutton").append(a(document.createElement("div")).addClass("bw-icon bw-icon-menu")).makeButton(n("Menu")).tapOrClick((function(){a("#top-container").hasClass("bw-show-popup-menu")?C():setTimeout((function(){a("#top-container").addClass("bw-show-popup-menu");var e=a(document.createElement("div")).addClass("bw-menu-overlay").appendTo("#container");setTimeout((function(){e.on("click touchend",(function(){setTimeout(C,500)}))}),350),a("#title-toolbar").appendTo(e)}),100)})).appendTo(t)}else e.attr("role","toolbar")}}function A(e,t,n){var r=a(e),o=a(document.createElement("div")).attr("id","container").prependTo(r).addClass("top-bottom-layout"),i=a(document.createElement("div")).attr("id","top-container").appendTo(o).addClass("top-container"),u=a(document.createElement("div")).appendTo(i).addClass("titlebar-layout");return a(document.createElement("div")).addClass("closebutton-container").appendTo(u),a(document.createElement("div")).addClass("title-container").append(a(document.createElement("span")).attr("id","title")).appendTo(u),n?a(n).addClass("bw-toolbar").appendTo(u):a(document.createElement("div")).attr("id","title-toolbar").addClass("bw-toolbar").appendTo(u),y(),a(t).appendTo(o).addClass("bottom-container"),D(),o}function E(){var t=a(document.createElement("div")).addClass("bw-debug-window bw-row-container").appendTo("body"),n=a(document.createElement("div")).addClass("bw-debug-output bw-row-resizing").appendTo(t);function r(e){e.appendTo(n),n[0].scrollTop=n[0].scrollHeight-n[0].getBoundingClientRect().height}function o(e){for(var t=[],n=0;n<e.length;++n)t.push(JSON.stringify(e[n]));return t.join(" ")}a(document.createElement("div")).addClass("bw-debug-close").text("X").tapOrClick((function(){t.remove(),localStorage.removeItem("bw-debug-enabled")})).appendTo(t),console.log=function(){r(a(document.createElement("p")).safeHtml(o(arguments)))},console.error=function(e,t){r(a(document.createElement("p")).css("color","red").safeHtml(o(arguments)))},window.onerror=function(e,t,n){return r(a(document.createElement("p")).attr("style","color: red").safeHtml(e+" ("+t+":"+n+")")),!0},console.log(e.getPlatform(),navigator.platform,navigator.userAgent,window.innerWidth,window.innerHeight);var i=a(document.createElement("input")).addClass("bw-debug-input bw-row-fixed").appendTo(t),u=[],s=0;i.keypress((function(e){var t;13===(e.keyCode?e.keyCode:e.which)&&(t=i.val().replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),console.log((0,eval)(t)),u.push(t),s=u.length,i.val(""))})),i.keydown((function(e){var t=e.keyCode?e.keyCode:e.which;38===t?s>0&&(--s,i.val(u[s])):40===t&&s<u.length&&(++s===u.length?i.val(""):i.val(u[s]))}));try{t.draggable()}catch(e){console.error("No drag support")}}function x(e){var t=0;e.clickOrHold((function(){t=0}),(function(){3==++t&&(function(){if(!(a(".bw-debug-window").length>0)){var e=a(document.createElement("div")).addClass("bw-debug-wrapper").appendTo("body"),t=a(document.createElement("div")).addClass("bw-debug-dialog").appendTo(e);a(document.createElement("p")).text("Enter your support key:").appendTo(t);var n=a(document.createElement("input")).attr("placeholder","key").appendTo(t);a(document.createElement("br")).appendTo(t),a(document.createElement("button")).attr("type","button").text("Cancel").tapOrClick((function(){e.remove()})).appendTo(t),a(document.createElement("button")).attr("type","button").text("OK").tapOrClick((function(){"bw-magic"===n.val()&&(E(),e.remove(),localStorage.setItem("bw-debug-enabled","true"))})).appendTo(t)}}(),t=0)}),2e3);try{"true"===localStorage.getItem("bw-debug-enabled")&&E()}catch(e){}}return a((function(){var t=e.getPlatform(),n=a("html");n.hasClass("ibw-platform-custom")||n.addClass(t)})),window.custom_alert=t.showAlert,window.criticalAlert=t.showCriticalAlert,window.bw_confirmation_dialog=t.showConfirmationDialog,window.tr=n,window.getUrlParams=c,window.getNakedURL=h,window.setQueryParameters=m,window.createLabeledCheckbox=l.createLabeledCheckbox,window.createProgressBar=l.createProgressBar,window.createSimpleCheckbox=l.createSimpleCheckbox,window.createNumberButtons=l.createNumberButtons,window.createSimpleRadiobutton=l.createSimpleRadiobutton,window.createLabeledRadiobutton=l.createLabeledRadiobutton,window.createProgressCircle=l.createProgressCircle,window.URIEncodeImage=d,window.BWAdaptToPageProtocol=p,window.updateConfigCSS=f.updateConfigCSS,{makeWidget:function(t){u((t=t||{}).instructions),i(t.instructions)||"title_layout"!==t.layout||(t.layout="title_toolbar_layout");var n=a("body");n.addClass("bw"),t.hasOwnProperty("no-user-select")&&!0===t["no-user-select"]&&n.addClass("no-user-select");var r,o=t.layout||"";if("title_layout"===o?(r=A("body","#bottom-container")).find(".top-container").addClass("title-only"):"title_overlay_layout"===o?((r=A("body","#bottom-container")).addClass("title-overlay"),r.find(".top-container").addClass("title-only")):r="title_toolbar_layout"===o?A("body","#bottom-container","#title-toolbar"):a("#container"),t.hasOwnProperty("title")&&""!==t.title){var c=r.find("#title");c.safeHtml(t.title),x(c)}else{var l=r.find(".top-container");l.addClass("title-empty"),x(l)}"ibw-platform-ipad-ibooks-epub"===e.getPlatform()&&(t.hasOwnProperty("epubBlockTouchEndCheck")||(t.epubBlockTouchEndCheck=function(e){return e.srcElement instanceof SVGElement||a(e.srcElement).hasClass("epub-block")}),document.addEventListener("touchend",(function(e){var n=a(window).width();(e.layerX<50||n-e.layerX<50||t.epubBlockTouchEndCheck(e))&&e.preventDefault()}),!1),t.hasOwnProperty("epubBlockTouchStartCheck")&&document.addEventListener("touchstart",(function(e){t.epubBlockTouchStartCheck(e)&&e.preventDefault()}),!1)),b(),s(t.instructions,t.uuid)},getNakedURL:h,setQueryParameters:m,prependToTitleToolbar:function(e){var t=a("#title-toolbar");e.prependTo(t),y(),D()},centerTitle:D,getBacklinkInfo:w,moveBackToPreviousWidget:g,ShowBacklinkIfRequired:b}}(n(58436),n(35048),n(35226),n(21506),n(84615),n(25750),n(76176),n(91845).Z)},92817:function(e,t,n){"use strict";n.d(t,{LT:function(){return h},_z:function(){return g},bw:function(){return m},v:function(){return b}});var r=n(3255),o=n.n(r),a=n(32944);function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=new(o()),c=function(e,t){var n=i(e);return n[t]||(n[t]=[]),n},l=function(e,t,n){var r=i(e);return r=function(e,t,n){var r=i(e);return r[n]||(r=c(r,n)),r[n][t]||(r[n]=i(e[n]),r[n][t]={x:t,y:n}),r}(r=c(r,n),t,n),r},d=function(e,t){return"V"===e.dir?{x:parseInt(e.x),y:parseInt(e.y)+t}:{x:parseInt(e.x)+t,y:parseInt(e.y)}},f=function(e,t,n){return e[n]?Object.assign({},e[n][t]):void 0},p=function(e,t){var n=function(e){return s.splitGraphemes(e.word).map((function(t,n){return d(e,n)}))}(t);return n.map((function(t){return f(e,t.x,t.y)}))},h=function(e,t){return p(e,t).map((function(e){return(null==e?void 0:e.letter)||" "})).join("")},m=function(e,t){var n=p(e,t);return!n.every((function(e){return" "===(null==e?void 0:e.letter)}))&&n.every((function(e){return null==e?void 0:e.letter}))},w=function(e,t,n,r,o){var a=i(e);return a[n]&&a[n][t]?a[n][t][r]=o:(a=l(a,t,n))[n][t][r]=o,a},g=function(e,t){var n=i(e);return t.forEach((function(e){e.letter&&(n=w(n,e.x,e.y,"letter",e.letter))})),n},b=function(e,t,n){var r=function(e){var t=[];return e&&e.forEach((function(e){s.splitGraphemes(e.word).forEach((function(n,r){var o=d(e,r);t=l(t,o.x,o.y),t=w(t,o.x,o.y,"letter",n)}))})),t}(t),o=e.map((function(e){return e?e.map((function(e){var t=Object.assign({},e);if(e&&(e.x||0===e.x)&&(e.y||0===e.y)){var o=f(r,e.x,e.y),i=(0,a.matchesOneOfAnswers)(e.letter,null==o?void 0:o.letter,n);t.isCorrect=i}return t})):e}));return function(e,t){var n=function(e){return e?e.map((function(e,t){var n={direction:e.dir,coords:[],description:e.description,id:t};return s.splitGraphemes(e.word).forEach((function(t,r){var o=d(e,r);n.coords.push(o)})),n})):[]}(t);return n.filter((function(t){return!t.coords.some((function(t){var n=f(e,t.x,t.y);return void 0===(null==n?void 0:n.letter)||""===n.letter}))}))}(e,t).forEach((function(e){e.coords.forEach((function(e){o=w(o,e.x,e.y,"isCompleteWord",!0)}))})),o}},57873:function(e,t,n){"use strict";function r(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var o=n[r].indexOf("=");if(!(o<0)){var a=[n[r].substr(0,o),n[r].substr(o+1)],i=decodeURIComponent(a[0]);if(void 0===t[i])t[i]=decodeURIComponent(a[1]);else if("string"==typeof t[i]){var u=[t[i],decodeURIComponent(a[1])];t[i]=u}else t[i].push(decodeURIComponent(a[1]))}}return t}function o(e){return-1===e.indexOf("?")?{}:r(e.replace(/[^?]*\?/,"").replace(/#.*/,""))}n.d(t,{oj:function(){return f},Z7:function(){return d},BZ:function(){return A},L2:function(){return C},U0:function(){return l},hC:function(){return c},qS:function(){return v},Cj:function(){return y},pn:function(){return D},aJ:function(){return b}});var a=/^(https?:\/\/)?((www\.)?youtube\.com\/(v|embed|u|w|shorts)|youtu\.be)\/([^?&#]+)/,i=/^(https?:\/\/)?(www\.)?youtube\.com\/watch\?(.*)/;function u(e){var t;return null!=(t=e.match(a))?t[5]:null!=(t=e.match(i))?r(t[3].split("#")[0]).v:null}function s(e){return-1!==(e=e.split("#")[0]).indexOf("?")?e:e.replace("&","?")}function c(e){var t=o(s(e));return null!=t.t?function(e){var t=e.match(/(([0-9]+)m)?([0-9]+)s/);if(null==t)return 0;var n=parseInt(t[3]);return t[2]&&(n+=60*parseInt(t[2])),n}(t.t)+"":null!=t.start?t.start:null}function l(e){var t=o(s(e));return null!=t.end?t.end:null}function d(e){return o(e).cc_load_policy}function f(e){return o(e).cc_lang_pref}var p=[/^(https?:\/\/)?vimeo.com\/(\d+)/,/^(https?:\/\/)?vimeo.com\/album\/[^/]+\/video\/([0-9]+)/,/^(https?:\/\/)?vimeo.com\/channels\/[^/]+\/([0-9]+)/,/^(https?:\/\/)?vimeo.com\/groups\/[^/]+\/video\/([0-9]+)/,/^(https?:\/\/)?vimeo.com\/ondemand\/[^/]+\/video\/([0-9]+)/];function h(e){for(var t=0;t<p.length;++t){var n=e.match(p[t]);if(null!=n)return n[2]}return null}var m=/^(https?:\/\/)?(www\.)?giphy\.com\/(embed|gifs)\/([^/?]+)/,w=/^((https?:)?\/\/)?media.giphy.com\/media\/([^/]+)/;function g(e){var t=e.match(m);return null!=t?t[4]:null!=(t=e.match(w))?t[3]:null}function b(e){return function(e){return null!=u(e)}(e)}function v(e){var t=u(e);return null!=t?t:e}function D(e){return function(e){return null!=h(e)}(e)}function C(e){var t=h(e);return null!=t?t:e}function y(e){return function(e){return null!=g(e)}(e)}function A(e){var t=g(e);return null!=t?t:e}},51881:function(e,t,n){"use strict";n.d(t,{iy:function(){return o}});var r={username:null,userid:null,email:null,providerid:null,providerhumanid:null,provider:null,school:null,token:null,sid:null,coaccount:null,className:null};function o(){return r.providerid}},3328:function(e,t,n){"use strict";n.r(t),n.d(t,{instructionsAreEmpty:function(){return f},prepareInfoPopup:function(){return h},showInfoPopup:function(){return p},showInfoPopupIfFirstTimeInSession:function(){return m}});var r=n(2784),o=n(28316),a=n.n(o),i=n(21506),u=n.n(i),s=n(34785),c=n(6424),l={InstructionsDialog:"mDZNc4BgVxuPv7dxAvVP"},d=n(5733);function f(e){return!e||!e.instructions||!!(0,d.isEmptyRichText)(e.instructions)}function p(e){if(!f(e)){var t=u()(document.createElement("div")).css({position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%"}).appendTo("body"),n=r.createElement(s.$,null,r.createElement(s.V,{className:l.InstructionsDialog,title:e.instructions_title||"",onOk:function(){t.remove()},onClose:function(){t.remove()}},r.createElement(c.H,{text:e.instructions||""})));a().render(n,t[0])}}function h(e){if(!f(e)){var t=u()("#title-toolbar");0===t.length&&(t=u()(document.createElement("div")).attr("id","title-toolbar").prependTo("body")),u()(document.createElement("div")).addClass("bw-toolbutton").append(u()(document.createElement("div")).addClass("bw-icon bw-icon-info")).makeButton(e.instructions_title||"").tapOrClick(p.bind(null,e)).prependTo(t)}}function m(e,t){if(!f(e))if(t){var n=t+"/instructions_shown";try{if("true"===sessionStorage.getItem(n))return}catch(e){}p(e);try{sessionStorage.setItem(n,"true")}catch(e){}}else p(e)}},56577:function(e,t,n){"use strict";n.d(t,{processRichTextWidgetPlayLinks:function(){return h}});var r=n(90882),o=n.n(r),a=n(86152),i=n.n(a),u=n(21506),s=n.n(u),c=n(63584),l=n(90985),d=n(51881),f=n(35048);function p(e,t,n){if(console.log("Widget link: "+e),e=function(e,t){var n=(0,l.getParameters)();delete n.design,delete n.content,delete n.translation,delete n.sig;var r=d.iy(),a=window.location.protocol+"//"+window.location.host+window.location.pathname+(0,c.replaceParamsBySessionLink)(window.location.search);if(null==n.login_hint&&r&&""!==r&&(window.location.search.length>1?a+="&":a+="?",a+="login_hint="+encodeURIComponent(r)),a+=(0,l.getHash)(),""===e||"?"===e.charAt(0))return f.showAlert("The widget is not included.","Broken link"),e;function u(e){return-1===e.indexOf("?")?"?":"&"}if(n.playBaseURL){var s=new URL(e),p=new URL(n.playBaseURL);s.protocol=p.protocol,s.host=p.host,e=s.href}if(t&&(e+=u(e)+"backlink="+encodeURIComponent(a),window.bwbackbuttonlabel&&(e+="&backbutton="+encodeURIComponent(window.bwbackbuttonlabel))),e.indexOf("/play/")>=0)n.q&&""!==n.q&&(e+=u(e)+function(e,t){if(null==e)return"";var n=i()(t)?t:[t];return o()(e.split("&"),(function(e){for(var t=0;t<n.length;++t)if(e.startsWith(n[t]+"="))return!1;return!0})).join("&")}((0,c.valueOrCacheValue)(n.q),["context_id","backlink","backbutton"])),null!=n.toplevel&&(e+=u(e)+"toplevel="+encodeURIComponent(n.toplevel)),r&&""!==r&&(e+=u(e)+"login_hint="+encodeURIComponent(r));else{var h={},m={};for(var w in n)"sid"!==w&&n.hasOwnProperty(w)&&(l.LEGACY_HASH_PARAMETERS.indexOf(w)>=0?h[w]=n[w]:m[w]=n[w]);r&&""!==r&&(h.login_hint=r),Object.keys(m).length>0&&(e+=u(e)+(0,l.urlencode)(m)),Object.keys(h).length>0&&(e+="#"+(0,l.urlencode)(h))}return e}(e,t),n){var r=s()(n.target),a=0===r.length?{left:0,top:0}:r.offset(),u=r.clone();s()("body").append(u),u.css({position:"absolute",left:a.left+"px",top:a.top+"px",width:r.width()+"px",height:r.height()+"px","border-left":r.css("border-left"),"border-right":r.css("border-right"),"border-top":r.css("border-top"),"border-bottom":r.css("border-bottom"),"border-top-left-radius":r.css("border-top-left-radius"),"border-top-right-radius":r.css("border-top-right-radius"),"border-bottom-left-radius":r.css("border-bottom-left-radius"),"border-bottom-right-radius":r.css("border-bottom-right-radius"),"-webkit-border-top-left-radius":r.css("-webkit-border-top-left-radius"),"-webkit-border-top-right-radius":r.css("-webkit-border-top-right-radius"),"-webkit-border-bottom-left-radius":r.css("-webkit-border-bottom-left-radius"),"-webkit-border-bottom-right-radius":r.css("-webkit-border-bottom-right-radius"),"box-shadow":r.css("box-shadow"),"-webkit-box-shadow":r.css("-webkit-box-shadow")});var p="all .5s linear";u.css({"-webkit-transition":p,"-moz-transition":p,"-o-transition":p,transition:p,"box-sizing":"border-box"});var h=s()(document).width(),m=s()(document).height(),w=h/r.width(),g=m/r.height(),b=w>g?g:w,v="translate("+(h/2-a.left-r.width()/2)+"px, "+(m/2-a.top-r.height()/2)+"px) scale("+b+")";u.css({"-webkit-transform":v,"-moz-transform":v,"-o-transform":v,transform:v,opacity:.1}),setTimeout((function(){window.location.href=e,u.remove()}),500)}else window.location.href=e,setTimeout((function(){window.location.href=e}),100)}function h(e,t){e.find("a").filter((function(){return null!=(e=s()(this).attr("href"))&&-1!==e.indexOf("bookwidgets.com/play/");var e})).each((function(){var e=s()(this),n=e.attr("href"),r=-1===n.indexOf("?")?"?":"&";n+=r+"noiframe=1",e.before(s()(document.createElement("a")).tapOrClick((function(e){return p(n,t),e.preventDefault(),e.stopPropagation(),!1})).attr("href","#").safeHtml(e.html())),e.after("&nbsp;"),e.hide()}))}},90985:function(e,t,n){"use strict";n.r(t),n.d(t,{LEGACY_HASH_PARAMETERS:function(){return r},getHash:function(){return f},getParameters:function(){return w},getQueryParams:function(){return s},getUrlParams:function(){return u},removeQueryStringParameter:function(){return d},split:function(){return a},splitList:function(){return i},updateWindowQueryParameter:function(){return p},urlencode:function(){return o}});var r=["context_id","course_id","hide_account","lfq","lti","login_hint","no_logout","q","sso","smartschool_platform","student_class_id","submit_url","teacher_email","teacher_id"];function o(e){var t=[];if("[object Array]"===Object.prototype.toString.call(e))for(var n=0;n<e.length;++n){var r=e[n];r.length>1?t.push(encodeURIComponent(r[0])+"="+encodeURIComponent(r[1])):t.push(encodeURIComponent(r[0]))}else for(var o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")}function a(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var o=n[r].indexOf("=");if(!(o<0)){var a=[n[r].substr(0,o),n[r].substr(o+1)],i=decodeURIComponent(a[0]);if(void 0===t[i])t[i]=decodeURIComponent(a[1]);else if("string"==typeof t[i]){var u=[t[i],decodeURIComponent(a[1])];t[i]=u}else t[i].push(decodeURIComponent(a[1]))}}return t}function i(e){for(var t=[],n=e.split("&"),r=0;r<n.length;r++){var o=n[r].indexOf("=");if(o<0)t.push([n[r]]);else{var a=[n[r].substr(0,o),n[r].substr(o+1)];t.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])])}}return t}function u(e){return-1===e.indexOf("?")?{}:a(e.replace(/[^?]*\?/,"").replace(/#.*/,""))}function s(e){return!e||e.length<1||"?"!==e[0]?{}:a(e.substr(1))}function c(e){return!e||e.length<1||"?"!==e[0]?[]:i(e.substr(1))}function l(e,t){return e.split("&").filter((function(e){return decodeURIComponent(e.split("=")[0])!==t})).join("&")}function d(e,t){return e.length>0&&("?"===e[0]||"#"===e[0])?e[0]+l(e.substring(1),t):l(e,t)}function f(e){return(e=e||window.location.href).indexOf("#")>=0?"#"+(e.split("#")[1]||""):""}function p(e,t){for(var n=c(window.location.search),r=!1,a=0;a<n.length;++a)if(n[a][0]===e){n[a].length>1?n[a][1]=t:n[a].push(t),r=!0;break}r||n.push([e,t]),history.replaceState("",document.title,window.location.pathname+"?"+o(n)+f())}!function(){if(!window.WidgetParams){var e=c(window.location.search),t=[],n=f();if(n.length>=1&&"#"===n[0])for(var a=i(n.substr(1)),u=0;u<a.length;++u){var s=a[u];r.indexOf(s[0])>=0?e.push(s):t.push(s)}var l=window.location.pathname;e.length>0&&(l+="?"+o(e)),t.length>0&&(l+="#"+o(t)),"undefined"!=typeof history&&history.replaceState("",document.title,l)}}();var h=f(),m=window.location.search;function w(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=window.hasOwnProperty("WidgetParams")?{}:s(m);if(e){var n=function(e){return!e||e.length<1||"#"!==e[0]?{}:a(e.substr(1))}(h);for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}if(window.WidgetParams)for(var o in window.WidgetParams)t[o]=window.WidgetParams[o];return t}},34785:function(e,t,n){"use strict";n.d(t,{V:function(){return s},$:function(){return c}});var r=n(2784),o=n(72779),a=n.n(o),i=n(88853),u={DialogWrapper:"zCWlb6KxN0wcFaBAlKK1",Dialog:"EUUG1NFe0EylNBWxGYLa",DialogBody:"c4uvUz6vdVB2ho6B3nyQ",DialogCloseButton:"XuaxNjYhh3a9jn_R0FtR"};function s(e){var t=e.title,n=e.children,o=e.OK,s=e.onOk,c=e.Cancel,l=e.onCancel,d=e.onClose,f=e.className;return r.createElement("div",{className:a()("bw-centered bw-row-container ui-dialog ui-widget ui-widget-content ui-corner-all bw-dialog",u.Dialog,f)},r.createElement("div",{className:"bw-row-fixed ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"},r.createElement("span",{className:"i-dialog-title",id:"ui-dialog-title-1"},t)),d&&r.createElement("button",{className:u.DialogCloseButton,onClick:d,"aria-label":(0,i.Iu)("Cancel")},"×"),r.createElement("div",{className:a()("bw-row-expanding ui-dialog-content ui-widget-content",u.DialogBody)},n),r.createElement("div",{className:"bw-row-fixed ui-dialog-buttonpane"},r.createElement("div",{className:"ui-dialog-buttonset"},l&&r.createElement("button",{className:"ui-button ui-widget ui-state-default ui-button-text-only",onClick:l},r.createElement("span",{className:"ui-button-text"},c)),r.createElement("button",{className:"ui-button ui-widget ui-state-default ui-button-text-only",onClick:s},r.createElement("span",{className:"ui-button-text"},o||(0,i.Iu)("OK"))))))}function c(e){var t=e.children;return r.createElement("div",{className:a()("bw-centering-container",u.DialogWrapper)},t)}},6424:function(e,t,n){"use strict";n.d(t,{H:function(){return m}});var r=n(2784),o=n(21506),a=n.n(o),i=n(5733),u=n(40904),s=n(89372),c=n(92824),l=n(39458);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,p(t).apply(this,arguments))}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,(o=[{key:"setWrapperDivRef",value:function(e){if(null!=e){var t=a()(e);t.safeHtml(s.prepare(this.props.text)),c.resolveYoutubePlaceholders(t),i.process(t),s.processMathElems(t),l.processAudioTags(t),this.props.direction&&(0,u.setAutoDirectionIfRequired)(this.props.directionSelector?t.find(this.props.directionSelector):t,this.props.direction)}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,o=e.style,a=e.id;return r.createElement("div",{className:t,onClick:n,style:o,ref:this.setWrapperDivRef.bind(this),id:a})}}])&&f(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}(r.PureComponent)},90882:function(e,t,n){var r=n(67552),o=n(98043),a=n(68286),i=n(86152);e.exports=function(e,t){return(i(e)?r:o)(e,a(t,3))}},16760:function(e,t,n){var r=n(50343),o=n(68286),a=n(93401),i=n(86152);e.exports=function(e,t){return(i(e)?r:a)(e,o(t,3))}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=t,r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},e=[],r.O=function(t,n,o,a){if(!n){var i=1/0;for(l=0;l<e.length;l++){n=e[l][0],o=e[l][1],a=e[l][2];for(var u=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[s])}))?n.splice(s--,1):(u=!1,a<i&&(i=a));if(u){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,o,a]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.j=410,function(){var e={410:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,i=n[0],u=n[1],s=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in u)r.o(u,o)&&(r.m[o]=u[o]);if(s)var l=s(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(l)},n=self.webpackChunkbw_widgets=self.webpackChunkbw_widgets||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=r.O(void 0,[736],(function(){return r(13377)}));o=r.O(o)}();